(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{400:function(e,t,s){e.exports=s.p+"assets/img/scene.05a84ac6.png"},563:function(e,t,s){"use strict";s.r(t);var a=s(24),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"qml-syntax"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#qml-syntax"}},[e._v("#")]),e._v(" QML Syntax")]),e._v(" "),a("p",[e._v("QML is a declarative language used to describe how objects relate to each other. QtQuick is a framework built on QML for buidling the user interface of your application. It breaks down the user interface into smaller elements, which can be combined into components. QtQuick describes the look and the behavior of these user interface elements. This user interface description can be enriched with JavaScript code to provide simple but also more complex logic. In this perspective, it follows the HTML-JavaScript pattern but QML and QtQuick are designed from the ground up to describe user interfaces, not text-documents.")]),e._v(" "),a("p",[e._v("In its simplest form, QtQuick lets you create a hierarchy of elements. Child elements inherit the coordinate system from the parent. An "),a("code",[e._v("x,y")]),e._v(" coordinate is always relative to the parent.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("QtQuick builds on QML. The QML language only knows of elements, properties, signals and bindings. QtQuick is a framework built on QML. Using default properties, the hierarchy of QtQuick elements can be constructed in an elegant way.")])]),e._v(" "),a("p",[a("img",{attrs:{src:s(400),alt:""}})]),e._v(" "),a("p",[e._v("Let’s start with a simple example of a QML file to explain the different syntax.")]),e._v(" "),a("div",{staticClass:"language-qml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-qml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// RectangleExample.qml")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" QtQuick\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// The root element is the Rectangle")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Rectangle")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// name this element root")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("root")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// properties: <name>: <value>")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("120")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("240")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// color property")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"#4A4A4A"')])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Declare a nested element (child of root)")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Image")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("triangle")]),e._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// reference the parent")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("parent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("width "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v(" width"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("40")])]),e._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'assets/triangle_red.png'")])]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Another child of root")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Text")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// un-named element")]),e._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// reference element by id")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("triangle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("y "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" triangle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("height "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("20")])]),e._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// reference root element")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("width")]),e._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'white'")])]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("horizontalAlignment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("Text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("AlignHCenter")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Triangle'")])]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])])])]),a("ul",[a("li",[e._v("The "),a("code",[e._v("import")]),e._v(" statement imports a module. An optional version in the form of "),a("code",[e._v("<major>.<minor>")]),e._v(" can be added.")]),e._v(" "),a("li",[e._v("Comments can be made using "),a("code",[e._v("//")]),e._v(" for single line comments or "),a("code",[e._v("/\\* \\*/")]),e._v(" for multi-line comments. Just like in C/C++ and JavaScript")]),e._v(" "),a("li",[e._v("Every QML file needs to have exactly one root element, like HTML")]),e._v(" "),a("li",[e._v("An element is declared by its type followed by "),a("code",[e._v("{ }")])]),e._v(" "),a("li",[e._v("Elements can have properties, they are in the form "),a("code",[e._v("name: value")])]),e._v(" "),a("li",[e._v("Arbitrary elements inside a QML document can be accessed by using their "),a("code",[e._v("id")]),e._v(" (an unquoted identifier)")]),e._v(" "),a("li",[e._v("Elements can be nested, meaning a parent element can have child elements. The parent element can be accessed using the "),a("code",[e._v("parent")]),e._v(" keyword")])]),e._v(" "),a("p",[e._v("With the "),a("code",[e._v("import")]),e._v(" statement you import a QML module by name. In Qt5 you had to specify a major and minor version (e.g. "),a("code",[e._v("2.15")]),e._v("), this is now optional in Qt6. For the book content we drop this optional version number as normally you automatically want to choose the newest version available from your selected Qt Kit.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("Often you want to access a particular element by id or a parent element using the "),a("code",[e._v("parent")]),e._v(" keyword. So it’s good practice to name your root element “root” using "),a("code",[e._v("id: root")]),e._v(". Then you don’t have to think about how the root element is named in your QML document.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can run the example using the Qt Quick runtime from the command line from your OS like this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("$ $QTDIR/bin/qml RectangleExample.qml\n")])])]),a("p",[e._v("Where you need to replace the "),a("code",[e._v("$QTDIR")]),e._v(" to the path to your Qt installation. The "),a("code",[e._v("qml")]),e._v(" executable initializes the Qt Quick runtime and interprets the provided QML file.")]),e._v(" "),a("p",[e._v("In Qt Creator, you can open the corresponding project file and run the document  "),a("code",[e._v("RectangleExample.qml")]),e._v(".")])]),e._v(" "),a("h2",{attrs:{id:"properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[e._v("#")]),e._v(" Properties")]),e._v(" "),a("p",[e._v("Elements are declared by using their element name but are defined by using their properties or by creating custom properties. A property is a simple key-value pair, e.g. "),a("code",[e._v("width: 100")]),e._v(", "),a("code",[e._v("text: 'Greetings'")]),e._v(", "),a("code",[e._v("color: '#FF0000'")]),e._v(". A property has a well-defined type and can have an initial value.")]),e._v(" "),a("div",{staticClass:"language-qml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-qml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Text")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (1) identifier")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("thisLabel")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (2) set x- and y-position")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("16")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (3) bind height to 2 * width")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("height")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" width")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (4) custom property")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("property")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("int")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("times")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (5) property alias")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("property")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("alias")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("anotherTimes")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("thisLabel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("times")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (6) set text appended by value")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Greetings "')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" times")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (7) font is a grouped property")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("font.family")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Ubuntu"')])]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("font.pixelSize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (8) KeyNavigation is an attached property")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("KeyNavigation.tab")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("otherLabel")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (9) signal handler for property changes")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("onHeightChanged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'height:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" height"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// focus is need to receive key events")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("focus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// change color based on focus value")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("focus "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("?")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"red"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"black"')])]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("Let’s go through the different features of properties:")]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("(1)")]),e._v(" "),a("code",[e._v("id")]),e._v(" is a very special property-like value, it is used to reference elements inside a QML file (called “document” in QML). The "),a("code",[e._v("id")]),e._v(" is not a string type but rather an identifier and part of the QML syntax. An "),a("code",[e._v("id")]),e._v(" needs to be unique inside a document and it can’t be reset to a different value, nor may it be queried. (It behaves much like a reference in the C++ world.)")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(2)")]),e._v(" A property can be set to a value, depending on its type. If no value is given for a property, an initial value will be chosen. You need to consult the documentation of the particular element for more information about the initial value of a property.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(3)")]),e._v(" A property can depend on one or many other properties. This is called "),a("em",[e._v("binding")]),e._v(". A bound property is updated when its dependent properties change. It works like a contract, in this case, the "),a("code",[e._v("height")]),e._v(" should always be two times the "),a("code",[e._v("width")]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(4)")]),e._v(" Adding new properties to an element is done using the "),a("code",[e._v("property")]),e._v(" qualifier followed by the type, the name and the optional initial value ("),a("code",[e._v("property <type> <name> : <value>")]),e._v("). If no initial value is given, a default initial value is chosen.")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),a("p",[e._v("You can also declare one property to be the default property using "),a("code",[e._v("default")]),e._v(" keyword. If another element is created inside the element and not explicitly bound to a property, it is bound to the default property. For instance, This is used when you add child elements. The child elements are added automatically to the default property "),a("code",[e._v("children")]),e._v(" of type list if they are visible elements.")])]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("(5)")]),e._v(" Another important way of declaring properties is using the "),a("code",[e._v("alias")]),e._v(" keyword ("),a("code",[e._v("property alias <name>: <reference>")]),e._v("). The "),a("code",[e._v("alias")]),e._v(" keyword allows us to forward a property of an object or an object itself from within the type to an outer scope. We will use this technique later when defining components to export the inner properties or element ids to the root level. A property alias does not need a type, it uses the type of the referenced property or object.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(6)")]),e._v(" The "),a("code",[e._v("text")]),e._v(" property depends on the custom property "),a("code",[e._v("times")]),e._v(" of type int. The "),a("code",[e._v("int")]),e._v(" based value is automatically converted to a "),a("code",[e._v("string")]),e._v(" type. The expression itself is another example of binding and results in the text being updated every time the "),a("code",[e._v("times")]),e._v(" property changes.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(7)")]),e._v(" Some properties are grouped properties. This feature is used when a property is more structured and related properties should be grouped together. Another way of writing grouped properties is "),a("code",[e._v('font { family: "Ubuntu"; pixelSize: 24 }')]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(8)")]),e._v(" Some properties belong to the element class itself. This is done for global settings elements which appear only once in the application (e.g. keyboard input). The writing is "),a("code",[e._v("<Element>.<property>: <value>")]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(9)")]),e._v(" For every property, you can provide a signal handler. This handler is called after the property changes. For example, here we want to be notified whenever the height changes and use the built-in console to log a message to the system.")])])]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),a("p",[e._v('An element id should only be used to reference elements inside your document (e.g. the current file). QML provides a mechanism called "dynamic scoping", where documents loaded later on overwrite the element IDs from documents loaded earlier. This makes it possible to reference element IDs from previously loaded documents if they have not yet been overwritten. It’s like creating global variables. Unfortunately, this frequently leads to really bad code in practice, where the program depends on the order of execution. Unfortunately, this can’t be turned off. Please only use this with care; or, even better, don’t use this mechanism at all. It’s better to export the element you want to provide to the outside world using properties on the root element of your document.')])]),e._v(" "),a("h2",{attrs:{id:"scripting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scripting"}},[e._v("#")]),e._v(" Scripting")]),e._v(" "),a("p",[e._v("QML and JavaScript (also known as ECMAScript) are best friends. In the "),a("em",[e._v("JavaScript")]),e._v(" chapter we will go into more detail on this symbiosis. Currently, we just want to make you aware of this relationship.")]),e._v(" "),a("div",{staticClass:"language-qml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-qml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Text")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[e._v("label")]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("x")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("y")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("24")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// custom counter property for space presses")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("property")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("int")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("spacePresses")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Space pressed: "')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" spacePresses "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('" times"')])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (1) handler for text changes. Need to use function to capture parameters")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("onTextChanged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("text")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" \n        console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"text changed to:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// need focus to receive key events")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("focus")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (2) handler with some JS")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("Keys.onSpacePressed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// clear the text on escape")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v("Keys.onEscapePressed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])]),e._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// (3) a JS function")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token javascript-function language-javascript"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        spacePresses "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" spacePresses "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("+")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])])])]),a("ul",[a("li",[a("p",[a("strong",[e._v("(1)")]),e._v(" The text changed handler "),a("code",[e._v("onTextChanged")]),e._v(" prints the current text every time the text changed due to the space bar being pressed. As we use a parameter injected by the signal, we need to use the function syntax here. It's also possible to use an arrow function ("),a("code",[e._v("(text) => {}")]),e._v("), but we feel "),a("code",[e._v("function(text) {}")]),e._v(" is more readable.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(2)")]),e._v(" When the text element receives the space key (because the user pressed the space bar on the keyboard) we call a JavaScript function "),a("code",[e._v("increment()")]),e._v(".")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("(3)")]),e._v(" Definition of a JavaScript function in the form of "),a("code",[e._v("function <name>(<parameters>) { ... }")]),e._v(", which increments our counter "),a("code",[e._v("spacePressed")]),e._v(". Every time "),a("code",[e._v("spacePressed")]),e._v(" is incremented, bound properties will also be updated.")])])]),e._v(" "),a("h2",{attrs:{id:"binding"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#binding"}},[e._v("#")]),e._v(" Binding")]),e._v(" "),a("p",[e._v("The difference between the QML "),a("code",[e._v(":")]),e._v(" (binding) and the JavaScript "),a("code",[e._v("=")]),e._v(" (assignment) is that the binding is a contract and keeps true over the lifetime of the binding, whereas the JavaScript assignment ("),a("code",[e._v("=")]),e._v(") is a one time value assignment.")]),e._v(" "),a("p",[e._v("The lifetime of a binding ends when a new binding is set on the property or even when a JavaScript value is assigned to the property. For example, a key handler setting the text property to an empty string would destroy our increment display:")]),e._v(" "),a("div",{staticClass:"language-qml extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("div",{staticClass:"highlighted"},[e._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-qml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v("Keys.onEscapePressed")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token javascript-expression language-javascript"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    label"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("text "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")])])])])]),a("p",[e._v("After pressing escape, pressing the space bar will not update the display anymore, as the previous binding of the "),a("code",[e._v("text")]),e._v(" property ("),a("em",[e._v("text: “Space pressed: ” + spacePresses + ” times”")]),e._v(") was destroyed.")]),e._v(" "),a("p",[e._v("When you have conflicting strategies to change a property as in this case (text updated by a change to a property increment via a binding and text cleared by a JavaScript assignment) then you can’t use bindings! You need to use assignment on both property change paths as the binding will be destroyed by the assignment (broken contract!).")])])}),[],!1,null,null,null);t.default=n.exports}}]);