<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Building an Application | The Qt 6 Book</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A book about QML">
    
    <link rel="preload" href="/assets/css/0.styles.92ea4280.css" as="style"><link rel="preload" href="/assets/js/app.85861ea8.js" as="script"><link rel="preload" href="/assets/js/2.26c961b2.js" as="script"><link rel="preload" href="/assets/js/39.2150f302.js" as="script"><link rel="prefetch" href="/assets/js/10.4395bd95.js"><link rel="prefetch" href="/assets/js/100.fa302cac.js"><link rel="prefetch" href="/assets/js/101.8d466e46.js"><link rel="prefetch" href="/assets/js/102.8e83581a.js"><link rel="prefetch" href="/assets/js/103.a82c478d.js"><link rel="prefetch" href="/assets/js/104.28055030.js"><link rel="prefetch" href="/assets/js/105.f0d68af0.js"><link rel="prefetch" href="/assets/js/106.bb60723a.js"><link rel="prefetch" href="/assets/js/107.7d45025a.js"><link rel="prefetch" href="/assets/js/108.0ed7a1f6.js"><link rel="prefetch" href="/assets/js/109.8946b3a4.js"><link rel="prefetch" href="/assets/js/11.b85f8031.js"><link rel="prefetch" href="/assets/js/110.11bd09cb.js"><link rel="prefetch" href="/assets/js/111.71acb487.js"><link rel="prefetch" href="/assets/js/112.fcf7de4a.js"><link rel="prefetch" href="/assets/js/113.2c5c65d1.js"><link rel="prefetch" href="/assets/js/114.d0eb4c04.js"><link rel="prefetch" href="/assets/js/115.760f698b.js"><link rel="prefetch" href="/assets/js/116.d3e7387b.js"><link rel="prefetch" href="/assets/js/117.1b1a7a03.js"><link rel="prefetch" href="/assets/js/118.e2bdad72.js"><link rel="prefetch" href="/assets/js/119.2e2f773b.js"><link rel="prefetch" href="/assets/js/12.83c6e34c.js"><link rel="prefetch" href="/assets/js/120.35cbc8cf.js"><link rel="prefetch" href="/assets/js/121.3671b29f.js"><link rel="prefetch" href="/assets/js/122.d462ba81.js"><link rel="prefetch" href="/assets/js/123.68da5c9a.js"><link rel="prefetch" href="/assets/js/124.0476127d.js"><link rel="prefetch" href="/assets/js/125.05527bc4.js"><link rel="prefetch" href="/assets/js/126.da700bd1.js"><link rel="prefetch" href="/assets/js/127.bba7328d.js"><link rel="prefetch" href="/assets/js/128.d06333ea.js"><link rel="prefetch" href="/assets/js/129.77aee385.js"><link rel="prefetch" href="/assets/js/13.b44307e8.js"><link rel="prefetch" href="/assets/js/130.b7e1846a.js"><link rel="prefetch" href="/assets/js/131.df7ded7d.js"><link rel="prefetch" href="/assets/js/132.eaa7412d.js"><link rel="prefetch" href="/assets/js/14.4daf5b31.js"><link rel="prefetch" href="/assets/js/15.8dfe57f5.js"><link rel="prefetch" href="/assets/js/16.ae047bb1.js"><link rel="prefetch" href="/assets/js/17.97cb1999.js"><link rel="prefetch" href="/assets/js/18.09368857.js"><link rel="prefetch" href="/assets/js/19.fd59ff42.js"><link rel="prefetch" href="/assets/js/20.6398077d.js"><link rel="prefetch" href="/assets/js/21.6a05a693.js"><link rel="prefetch" href="/assets/js/22.947a34c5.js"><link rel="prefetch" href="/assets/js/23.c793e061.js"><link rel="prefetch" href="/assets/js/24.d60c1260.js"><link rel="prefetch" href="/assets/js/25.f5cfb5dd.js"><link rel="prefetch" href="/assets/js/26.cdd6b54d.js"><link rel="prefetch" href="/assets/js/27.2e40b24c.js"><link rel="prefetch" href="/assets/js/28.a44092e5.js"><link rel="prefetch" href="/assets/js/29.0b58d719.js"><link rel="prefetch" href="/assets/js/3.15609819.js"><link rel="prefetch" href="/assets/js/30.13230c3d.js"><link rel="prefetch" href="/assets/js/31.02bb2aa2.js"><link rel="prefetch" href="/assets/js/32.900bae89.js"><link rel="prefetch" href="/assets/js/33.809d8313.js"><link rel="prefetch" href="/assets/js/34.b22e38fe.js"><link rel="prefetch" href="/assets/js/35.e0175be4.js"><link rel="prefetch" href="/assets/js/36.5df92709.js"><link rel="prefetch" href="/assets/js/37.2a36790b.js"><link rel="prefetch" href="/assets/js/38.7f2d9d42.js"><link rel="prefetch" href="/assets/js/4.abbcf459.js"><link rel="prefetch" href="/assets/js/40.418ab892.js"><link rel="prefetch" href="/assets/js/41.8613e33c.js"><link rel="prefetch" href="/assets/js/42.fd4fbf33.js"><link rel="prefetch" href="/assets/js/43.a1d7c212.js"><link rel="prefetch" href="/assets/js/44.6668e30e.js"><link rel="prefetch" href="/assets/js/45.afe197bb.js"><link rel="prefetch" href="/assets/js/46.746cdebe.js"><link rel="prefetch" href="/assets/js/47.be6ca186.js"><link rel="prefetch" href="/assets/js/48.2f55198b.js"><link rel="prefetch" href="/assets/js/49.8cd15ae8.js"><link rel="prefetch" href="/assets/js/5.3e69f88a.js"><link rel="prefetch" href="/assets/js/50.dbabd303.js"><link rel="prefetch" href="/assets/js/51.d8b5ec87.js"><link rel="prefetch" href="/assets/js/52.12f7375a.js"><link rel="prefetch" href="/assets/js/53.eed8ca8f.js"><link rel="prefetch" href="/assets/js/54.c4d75775.js"><link rel="prefetch" href="/assets/js/55.b1783490.js"><link rel="prefetch" href="/assets/js/56.5901bd6c.js"><link rel="prefetch" href="/assets/js/57.95985066.js"><link rel="prefetch" href="/assets/js/58.d098dc2b.js"><link rel="prefetch" href="/assets/js/59.f534f5f5.js"><link rel="prefetch" href="/assets/js/6.599da621.js"><link rel="prefetch" href="/assets/js/60.0398dfb7.js"><link rel="prefetch" href="/assets/js/61.56fd70e0.js"><link rel="prefetch" href="/assets/js/62.b84b32ba.js"><link rel="prefetch" href="/assets/js/63.c521b8ab.js"><link rel="prefetch" href="/assets/js/64.2bf1e6e2.js"><link rel="prefetch" href="/assets/js/65.0a769062.js"><link rel="prefetch" href="/assets/js/66.a7c4130c.js"><link rel="prefetch" href="/assets/js/67.df2ba082.js"><link rel="prefetch" href="/assets/js/68.8a6223f5.js"><link rel="prefetch" href="/assets/js/69.216e47e2.js"><link rel="prefetch" href="/assets/js/7.4b835f9d.js"><link rel="prefetch" href="/assets/js/70.63f79832.js"><link rel="prefetch" href="/assets/js/71.f5bdf6b7.js"><link rel="prefetch" href="/assets/js/72.a8cf8fb8.js"><link rel="prefetch" href="/assets/js/73.3538ebde.js"><link rel="prefetch" href="/assets/js/74.63b1b93e.js"><link rel="prefetch" href="/assets/js/75.4d0beaa9.js"><link rel="prefetch" href="/assets/js/76.7d3c932a.js"><link rel="prefetch" href="/assets/js/77.90fe8238.js"><link rel="prefetch" href="/assets/js/78.94404738.js"><link rel="prefetch" href="/assets/js/79.ee568c52.js"><link rel="prefetch" href="/assets/js/8.e9c62eff.js"><link rel="prefetch" href="/assets/js/80.e200eac0.js"><link rel="prefetch" href="/assets/js/81.634d249d.js"><link rel="prefetch" href="/assets/js/82.484db6b7.js"><link rel="prefetch" href="/assets/js/83.6154fd3d.js"><link rel="prefetch" href="/assets/js/84.24b8d4cb.js"><link rel="prefetch" href="/assets/js/85.6c107d50.js"><link rel="prefetch" href="/assets/js/86.f87351fc.js"><link rel="prefetch" href="/assets/js/87.a87dddc8.js"><link rel="prefetch" href="/assets/js/88.155ec451.js"><link rel="prefetch" href="/assets/js/89.64bcf5e9.js"><link rel="prefetch" href="/assets/js/9.fc273458.js"><link rel="prefetch" href="/assets/js/90.19f96ff1.js"><link rel="prefetch" href="/assets/js/91.6124d2ee.js"><link rel="prefetch" href="/assets/js/92.e625e357.js"><link rel="prefetch" href="/assets/js/93.a66de41e.js"><link rel="prefetch" href="/assets/js/94.56f157b5.js"><link rel="prefetch" href="/assets/js/95.9677e971.js"><link rel="prefetch" href="/assets/js/96.c4114f1e.js"><link rel="prefetch" href="/assets/js/97.d64a40ed.js"><link rel="prefetch" href="/assets/js/98.c46e9482.js"><link rel="prefetch" href="/assets/js/99.c23f6710.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92ea4280.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">The Qt 6 Book</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/qmlbook/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/qmlbook/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/preface/preface" class="sidebar-heading clickable"><span>Preface</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/preface/preface.html" class="sidebar-link">Welcome!</a></li><li><a href="/preface/acknowledgements.html" class="sidebar-link">Acknowledgements</a></li><li><a href="/preface/authors.html" class="sidebar-link">Authors</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch01-meetqt/meet-qt" class="sidebar-heading clickable"><span>Meet Qt</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch01-meetqt/meet-qt.html" class="sidebar-link">Qt and Qt Quick</a></li><li><a href="/ch01-meetqt/blocks.html" class="sidebar-link">Qt Building Blocks</a></li><li><a href="/ch01-meetqt/intro.html" class="sidebar-link">Qt 6 Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch02-start/quick-start" class="sidebar-heading clickable"><span>Getting Started</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch02-start/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/ch02-start/install.html" class="sidebar-link">Installing Qt 6 SDK</a></li><li><a href="/ch02-start/hello-world.html" class="sidebar-link">Hello World</a></li><li><a href="/ch02-start/app-types.html" class="sidebar-link">Application Types</a></li><li><a href="/ch02-start/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch03-qtcreator/qt-creator" class="sidebar-heading clickable"><span>Qt Creator IDE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch03-qtcreator/qt-creator.html" class="sidebar-link">Qt Creator IDE</a></li><li><a href="/ch03-qtcreator/user-interface.html" class="sidebar-link">The User Interface</a></li><li><a href="/ch03-qtcreator/kit-registry.html" class="sidebar-link">Registering your Qt Kit</a></li><li><a href="/ch03-qtcreator/projects.html" class="sidebar-link">Managing Projects</a></li><li><a href="/ch03-qtcreator/editor.html" class="sidebar-link">Using the Editor</a></li><li><a href="/ch03-qtcreator/locator.html" class="sidebar-link">Locator</a></li><li><a href="/ch03-qtcreator/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/ch03-qtcreator/shortcuts.html" class="sidebar-link">Shortcuts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch04-qmlstart/quick-start" class="sidebar-heading clickable"><span>Quick Starter</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch04-qmlstart/quick-start.html" class="sidebar-link">Quick Starter</a></li><li><a href="/ch04-qmlstart/qml-syntax.html" class="sidebar-link">QML Syntax</a></li><li><a href="/ch04-qmlstart/core-elements.html" class="sidebar-link">Core Elements</a></li><li><a href="/ch04-qmlstart/components.html" class="sidebar-link">Components</a></li><li><a href="/ch04-qmlstart/transformations.html" class="sidebar-link">Simple Transformations</a></li><li><a href="/ch04-qmlstart/positioning.html" class="sidebar-link">Positioning Elements</a></li><li><a href="/ch04-qmlstart/layout.html" class="sidebar-link">Layout Items</a></li><li><a href="/ch04-qmlstart/input.html" class="sidebar-link">Input Elements</a></li><li><a href="/ch04-qmlstart/advanced.html" class="sidebar-link">Advanced Techniques</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch05-fluid/fluid-elements" class="sidebar-heading clickable"><span>Fluid Elements</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch05-fluid/fluid-elements.html" class="sidebar-link">Fluid Elements</a></li><li><a href="/ch05-fluid/animations.html" class="sidebar-link">Animations</a></li><li><a href="/ch05-fluid/states-transitions.html" class="sidebar-link">States and Transitions</a></li><li><a href="/ch05-fluid/advanced.html" class="sidebar-link">Advanced Techniques</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch06-controls/controls2" class="sidebar-heading clickable"><span>QtQuick Controls</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch06-controls/controls2.html" class="sidebar-link">UI Controls</a></li><li><a href="/ch06-controls/introduction.html" class="sidebar-link">Introduction to Controls</a></li><li><a href="/ch06-controls/image-viewer.html" class="sidebar-link">An Image Viewer</a></li><li><a href="/ch06-controls/common-patterns.html" class="sidebar-link">Common Patterns</a></li><li><a href="/ch06-controls/imagine-style.html" class="sidebar-link">The Imagine Style</a></li><li><a href="/ch06-controls/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch07-modelview/model-view" class="sidebar-heading clickable"><span>Model View</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch07-modelview/model-view.html" class="sidebar-link">Model-View-Delegate</a></li><li><a href="/ch07-modelview/concept.html" class="sidebar-link">Concept</a></li><li><a href="/ch07-modelview/basic-models.html" class="sidebar-link">Basic Models</a></li><li><a href="/ch07-modelview/dynamic-views.html" class="sidebar-link">Dynamic Views</a></li><li><a href="/ch07-modelview/delegate.html" class="sidebar-link">Delegate</a></li><li><a href="/ch07-modelview/advanced.html" class="sidebar-link">Advanced Techniques</a></li><li><a href="/ch07-modelview/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch08-canvas/canvas-element" class="sidebar-heading clickable"><span>Canvas</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch08-canvas/canvas-element.html" class="sidebar-link">Canvas Element</a></li><li><a href="/ch08-canvas/convenience-api.html" class="sidebar-link">Convenience API</a></li><li><a href="/ch08-canvas/gradients.html" class="sidebar-link">Gradients</a></li><li><a href="/ch08-canvas/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/ch08-canvas/images.html" class="sidebar-link">Images</a></li><li><a href="/ch08-canvas/transformation.html" class="sidebar-link">Transformation</a></li><li><a href="/ch08-canvas/composition-modes.html" class="sidebar-link">Composition Modes</a></li><li><a href="/ch08-canvas/pixel-buffer.html" class="sidebar-link">Pixel Buffers</a></li><li><a href="/ch08-canvas/canvas-paint.html" class="sidebar-link">Canvas Paint</a></li><li><a href="/ch08-canvas/port-from-html.html" class="sidebar-link">Porting from HTML5 Canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch09-shapes/shapes" class="sidebar-heading clickable"><span>Shapes</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch09-shapes/shapes.html" class="sidebar-link">Shapes</a></li><li><a href="/ch09-shapes/basics.html" class="sidebar-link">A Basic Shape</a></li><li><a href="/ch09-shapes/paths.html" class="sidebar-link">Building Paths</a></li><li><a href="/ch09-shapes/gradients.html" class="sidebar-link">Filling Shapes</a></li><li><a href="/ch09-shapes/animations.html" class="sidebar-link">Animating Shapes</a></li><li><a href="/ch09-shapes/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch10-effects/effects" class="sidebar-heading clickable"><span>Effects</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch10-effects/effects.html" class="sidebar-link">Effects in QML</a></li><li><a href="/ch10-effects/particles.html" class="sidebar-link">Particle Concept</a></li><li><a href="/ch10-effects/simple-simulation.html" class="sidebar-link">Simple Simulation</a></li><li><a href="/ch10-effects/particle-parameters.html" class="sidebar-link">Particle Parameters</a></li><li><a href="/ch10-effects/directed-particles.html" class="sidebar-link">Directed Particles</a></li><li><a href="/ch10-effects/affecting-particles.html" class="sidebar-link">Affecting Particles</a></li><li><a href="/ch10-effects/particle-groups.html" class="sidebar-link">Particle Groups</a></li><li><a href="/ch10-effects/particle-painters.html" class="sidebar-link">Particle Painters</a></li><li><a href="/ch10-effects/opengl-shaders.html" class="sidebar-link">Graphics Shaders</a></li><li><a href="/ch10-effects/shader-elements.html" class="sidebar-link">Shader Elements</a></li><li><a href="/ch10-effects/fragment-shaders.html" class="sidebar-link">Fragment Shaders</a></li><li><a href="/ch10-effects/wave-effect.html" class="sidebar-link">Wave Effect</a></li><li><a href="/ch10-effects/vertex-shader.html" class="sidebar-link">Vertex Shader</a></li><li><a href="/ch10-effects/curtain-effect.html" class="sidebar-link">Curtain Effect</a></li><li><a href="/ch10-effects/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch11-multimedia/multimedia" class="sidebar-heading clickable"><span>Multimedia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch11-multimedia/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/ch11-multimedia/playing-media.html" class="sidebar-link">Playing Media</a></li><li><a href="/ch11-multimedia/sound-effects.html" class="sidebar-link">Sound Effects</a></li><li><a href="/ch11-multimedia/video-streams.html" class="sidebar-link">Video Streams</a></li><li><a href="/ch11-multimedia/capturing-images.html" class="sidebar-link">Capturing Images</a></li><li><a href="/ch11-multimedia/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch12-networking/networking" class="sidebar-heading clickable"><span>Networking</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch12-networking/networking.html" class="sidebar-link">Networking</a></li><li><a href="/ch12-networking/serve-qml.html" class="sidebar-link">Serving UI via HTTP</a></li><li><a href="/ch12-networking/templates.html" class="sidebar-link">Templates</a></li><li><a href="/ch12-networking/http-requests.html" class="sidebar-link">HTTP Requests</a></li><li><a href="/ch12-networking/local-files.html" class="sidebar-link">Local files</a></li><li><a href="/ch12-networking/rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/ch12-networking/authentication.html" class="sidebar-link">Authentication using OAuth</a></li><li><a href="/ch12-networking/web-sockets.html" class="sidebar-link">Web Sockets</a></li><li><a href="/ch12-networking/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch13-storage/storage" class="sidebar-heading clickable"><span>Storage</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch13-storage/storage.html" class="sidebar-link">Storage</a></li><li><a href="/ch13-storage/settings.html" class="sidebar-link">Settings</a></li><li><a href="/ch13-storage/local-storage.html" class="sidebar-link">Local Storage - SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch14-dynamicqml/dynamic-qml" class="sidebar-heading clickable"><span>Dynamic QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch14-dynamicqml/dynamic-qml.html" class="sidebar-link">Dynamic QML</a></li><li><a href="/ch14-dynamicqml/loading-components.html" class="sidebar-link">Loading Components Dynamically</a></li><li><a href="/ch14-dynamicqml/dynamic-objects.html" class="sidebar-link">Creating and Destroying Objects</a></li><li><a href="/ch14-dynamicqml/tracking-objects.html" class="sidebar-link">Tracking Dynamic Objects</a></li><li><a href="/ch14-dynamicqml/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch15-javascript/javascript" class="sidebar-heading clickable"><span>Javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch15-javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/ch15-javascript/html-qml.html" class="sidebar-link">Browser/HTML vs Qt Quick/QML</a></li><li><a href="/ch15-javascript/js-language.html" class="sidebar-link">JS Language</a></li><li><a href="/ch15-javascript/js-objects.html" class="sidebar-link">JS Objects</a></li><li><a href="/ch15-javascript/js-console.html" class="sidebar-link">Creating a JS Console</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch16-qtcpp/qtcpp" class="sidebar-heading clickable"><span>Qt C++</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch16-qtcpp/qtcpp.html" class="sidebar-link">Qt and C++</a></li><li><a href="/ch16-qtcpp/boilerplate.html" class="sidebar-link">A Boilerplate Application</a></li><li><a href="/ch16-qtcpp/qobject.html" class="sidebar-link">The QObject</a></li><li><a href="/ch16-qtcpp/build-system.html" class="sidebar-link">Build Systems</a></li><li><a href="/ch16-qtcpp/common-classes.html" class="sidebar-link">Common Qt Classes</a></li><li><a href="/ch16-qtcpp/cpp-models.html" class="sidebar-link">Models in C++</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch17-extensions/extending-qml" class="sidebar-heading clickable"><span>Extending QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch17-extensions/extending-qml.html" class="sidebar-link">Extending QML with C++</a></li><li><a href="/ch17-extensions/qml-runtime.html" class="sidebar-link">Understanding the QML Run-time</a></li><li><a href="/ch17-extensions/plugin-content.html" class="sidebar-link">Plugin Content</a></li><li><a href="/ch17-extensions/create-plugin.html" class="sidebar-link">Creating the plugin</a></li><li><a href="/ch17-extensions/fileio-demo.html" class="sidebar-link">FileIO Implementation</a></li><li><a href="/ch17-extensions/using-fileio.html" class="sidebar-link">Using FileIO</a></li><li><a href="/ch17-extensions/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch18-python/qt-python" class="sidebar-heading clickable open"><span>Qt for Python</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch18-python/qt-python.html" class="sidebar-link">Qt for Python</a></li><li><a href="/ch18-python/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/ch18-python/installing.html" class="sidebar-link">Installing</a></li><li><a href="/ch18-python/build-app.html" aria-current="page" class="active sidebar-link">Building an Application</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ch18-python/build-app.html#running-qml-from-python" class="sidebar-link">Running QML from Python</a></li><li class="sidebar-sub-header"><a href="/ch18-python/build-app.html#exposing-python-objects-to-qml" class="sidebar-link">Exposing Python Objects to QML</a></li><li class="sidebar-sub-header"><a href="/ch18-python/build-app.html#exposing-a-python-class-to-qml" class="sidebar-link">Exposing a Python class to QML</a></li><li class="sidebar-sub-header"><a href="/ch18-python/build-app.html#a-model-from-python" class="sidebar-link">A Model from Python</a></li></ul></li><li><a href="/ch18-python/limitations.html" class="sidebar-link">Limitations</a></li><li><a href="/ch18-python/summary.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="building-an-application"><a href="#building-an-application" class="header-anchor">#</a> Building an Application</h1> <p>In this chapter we will look at how you can combine Python and QML. The most natural way to combine the two worlds is to do as with C++ and QML, i.e. implement the logic in Python and the presentation in QML.</p> <p>To do this, we need to understand how to combine QML and Python into a single program, and then how to implement interfaces between the two worlds. In the sub-sections below, we will look at how this is done. We will start simple and progress to an example exposing the capabilities of a Python module to QML through a Qt item model.</p> <h2 id="running-qml-from-python"><a href="#running-qml-from-python" class="header-anchor">#</a> Running QML from Python</h2> <p>The very first step is to create a Python program that can host the <em>Hello World</em> QML program shown below.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Window

<span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Python World!&quot;</span><span class="token punctuation">)</span></span>
<span class="token punctuation">}</span></code></pre></div><p>To do this, we need a Qt mainloop provided by <code>QGuiApplication</code> from the <code>QtGui</code> module. We also need a <code>QQmlApplicationEngine</code> from the <code>QtQml</code> module. In order to pass the reference to the source file to the QML application engine, we also need the <code>QUrl</code> class from the <code>QtCore</code> module.</p> <p>In the code below we emulate the functionality of the boilerplate C++ code generated by Qt Creator for QML projects. It instanciates the application object, and creates a QML application engine. It then loads the QML and then ensures that the QML was loaded by checking if a root object was created. Finally, it exits and returns the value returned by the <code>exec</code> method of the application object.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sys
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QGuiApplication
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtQml <span class="token keyword">import</span> QQmlApplicationEngine
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QUrl

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QGuiApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    engine <span class="token operator">=</span> QQmlApplicationEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> engine<span class="token punctuation">.</span>rootObjects<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>Executing the example results in a window with the title <em>Hello Python World</em>.</p> <p><img src="/assets/img/qml-hello-world.4e27e944.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The example assumes that it is executed from the directory containing the <code>main.qml</code> source file. You can termine the location of the Python file being executed using the <code>__file__</code> variable. This can be used to locate the QML files relative to the Python file as shown in this <a href="http://blog.qt.io/blog/2018/05/14/qml-qt-python/" target="_blank" rel="noopener noreferrer">blog post<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h2 id="exposing-python-objects-to-qml"><a href="#exposing-python-objects-to-qml" class="header-anchor">#</a> Exposing Python Objects to QML</h2> <p>The easiest way to share information between Python and QML is to expose a Python object to QML. This is done by registering a <em>context property</em> through the <code>QQmlApplicationEngine</code>. Before we can do that, we need to define a class so that we have an object to expose.</p> <p>Qt classes come with a number of features that we want to be able to use. These are: signals, slots and properties. In this first example, we will restrict ourselves to a basic pair of signal and slot. The rest will be covered in the examples further on.</p> <h3 id="signals-and-slots"><a href="#signals-and-slots" class="header-anchor">#</a> Signals and Slots</h3> <p>We start with the class <code>NumberGenerator</code>. It has a constructor, a method called <code>updateNumber</code> and a signal called <code>nextNumber</code>. The idea is that when you call <code>updateNumber</code>, the signal <code>nextNumber</code> is emitted with a new random number. You can see the code for the class below, but first we will look at the details.</p> <p>First of all we make sure to call <code>QObject.__init__</code> from our constructor. This is very important, as the example will not work without it.</p> <p>Then we declare a signal by creating an instance of the <code>Signal</code> class from the <code>PySide6.QtCore</code> module. In this case, the signal carries an integer value, hence the <code>int</code>. The signal parameter name, <code>number</code>, is defined in the <code>arguments</code> parameter.</p> <p>Finally, we <em>decorate</em> the <code>updateNumber</code> method with the <code>@Slot()</code> decorator, thus turning it into a slot. There is not concept of <em>invokables</em> in Qt for Python, so all callable methods must be slots.</p> <p>In the <code>updateNumber</code> method we emit the <code>nextNumber</code> signal using the <code>emit</code> method. This is a bit different than the syntax for doing so from QML or C++ as the signal is represented by an object instead of being a callable function.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> random

<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QObject<span class="token punctuation">,</span> Signal<span class="token punctuation">,</span> Slot

<span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        QObject<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
    
    nextNumber <span class="token operator">=</span> Signal<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> arguments<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@Slot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">giveNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>nextNumber<span class="token punctuation">.</span>emit<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>Next up is to combine the class we just created with the boilerplate code for combining QML and Python from earlier. This gives us the following entry-point code.</p> <p>The interesting lines are the one where we first instatiate a <code>NumberGenerator</code>. This object is then exposed to QML using the <code>setContextProperty</code> method of the <code>rootContext</code> of the QML engine. This exposes the object to QML as a global variable under the name <code>numberGenerator</code>.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> sys

<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QGuiApplication
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtQml <span class="token keyword">import</span> QQmlApplicationEngine
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QUrl

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QGuiApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    engine <span class="token operator">=</span> QQmlApplicationEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    number_generator <span class="token operator">=</span> NumberGenerator<span class="token punctuation">(</span><span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span>rootContext<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setContextProperty<span class="token punctuation">(</span><span class="token string">&quot;numberGenerator&quot;</span><span class="token punctuation">,</span> number_generator<span class="token punctuation">)</span>
    
    engine<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> engine<span class="token punctuation">.</span>rootObjects<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    
    
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>Continuing to the QML code, we can see that we’ve created a Qt Quick Controls 2 user interface consisting of a <code>Button</code> and a <code>Label</code>. In the button’s <code>onClicked</code> handler, the <code>numberGenerator.updateNumber()</code> function is called. This is the slot of the object instantiated on the Python side.</p> <p>To receive a signal from an object that has been instantiated outside of QML we need to use a <code>Connections</code> element. This allows us to attach a signal hanlder to an existing target.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Window
<span class="token keyword">import</span> QtQuick.Controls

<span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Python World!&quot;</span><span class="token punctuation">)</span></span>
    
    <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
        <span class="token class-name">Button</span> <span class="token punctuation">{</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Give me a number!&quot;</span><span class="token punctuation">)</span></span>
            <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span><span class="token function">giveNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Label</span> <span class="token punctuation">{</span>
            <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberLabel</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;no number&quot;</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Connections</span> <span class="token punctuation">{</span>
        <span class="token property">target</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator</span>
        <span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">onNextNumber</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            numberLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> number
        <span class="token punctuation">}</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <p>Instead of relying soley on signals and slots, the common way to expose state to QML is through properties. A property is a combination of a setter, getter and notification signal. The setter is optional, as we can also have read-only properties.</p> <p>To try this out we will update the <code>NumberGenerator</code> from the last example to a property based version. It will have two properties: <code>number</code>, a read-only property holding the last random number, and <code>maxNumber</code>, a read-write property holding the maximum value that can be returned. It will also have a slot, <code>updateNumber</code> that updates the random number.</p> <p>Before we dive into the details of properties, we create a basic Python class for this. It consists of the relevant getters and setters, but not Qt signalling. As a matter of fact, the only Qt part here is the inheritance from <code>QObject</code>. Even the names of the methods are Python style, i.e. using underscores instead of camelCase.</p> <p>Take notice of the underscores (“<code>__</code>”) at the beginning of the <code>__set_number</code> method. This implies that it is a private method. So even when the <code>number</code> property is read-only, we provide a setter. We just don’t make it public. This allows us to take actions when changing the value (e.g. emitting the notification signal).</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        QObject<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__number <span class="token operator">=</span> <span class="token number">42</span>
        self<span class="token punctuation">.</span>__max_number <span class="token operator">=</span> <span class="token number">99</span>
    
    <span class="token keyword">def</span> <span class="token function">set_max_number</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> val <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            val <span class="token operator">=</span> <span class="token number">0</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__max_number <span class="token operator">!=</span> val<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__max_number <span class="token operator">=</span> val
            
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__number <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>__max_number<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__set_number<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__max_number<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_max_number</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__max_number

    <span class="token keyword">def</span> <span class="token function">__set_number</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__number <span class="token operator">!=</span> val<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__number <span class="token operator">=</span> val
    
    <span class="token keyword">def</span> <span class="token function">get_number</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__number
</code></pre></div><p>In order to define properties, we need to import the concepts of <code>Signal</code>, <code>Slot</code>, and <code>Property</code> from <code>PySide2.QtCore</code>. In the full example, there are more imports, but these are the ones relevant to the properties.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QObject<span class="token punctuation">,</span> Signal<span class="token punctuation">,</span> Slot<span class="token punctuation">,</span> Property
</code></pre></div><p>Now we are ready to define the first property, <code>number</code>. We start off by declaring the signal <code>numberChanged</code>, which we then invoke in the <code>__set_number</code> method so that the signal is emitted when the value is changed.</p> <p>After that, all that is left is to instantiate the <code>Property</code> object. The <code>Property</code> contructor takes three arguments in this case: the type (<code>int</code>), the getter (<code>get_number</code>) and the notification signal which is passed as a named argument (<code>notify=numberChanged</code>). Notice that the getter has a Python name, i.e. using underscore rather than camelCase, as it is used to read the value from Python. For QML, the property name, <code>number</code>, is used.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># ...</span>
    
    <span class="token comment"># number</span>
    
    numberChanged <span class="token operator">=</span> Signal<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">__set_number</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__number <span class="token operator">!=</span> val<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__number <span class="token operator">=</span> val
            self<span class="token punctuation">.</span>numberChanged<span class="token punctuation">.</span>emit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__number<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_number</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__number
    
    number <span class="token operator">=</span> Property<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> get_number<span class="token punctuation">,</span> notify<span class="token operator">=</span>numberChanged<span class="token punctuation">)</span>
</code></pre></div><p>This leads us to the next property, <code>maxNumber</code>. This is a read-write property, so we need to provide a setter, as well as everything that we did for the <code>number</code> property.</p> <p>First up we declare the <code>maxNumberChanged</code> signal. This time, using the <code>@Signal</code> decorator instead of instantiating a <code>Signal</code> object. We also provide a setter slot, <code>setMaxNumber</code> with a Qt name (camelCase) that simply calls the Python method <code>set_max_number</code> alongside a getter with a Python name. Again, the setter emits the change signal when the value is updated.</p> <p>Finally we put the pieces together into a read-write property by instantiating a <code>Property</code> object taking the type, getter, setter and notification signal as arguments.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># ...</span>

    <span class="token comment"># maxNumber</span>

    <span class="token decorator annotation punctuation">@Signal</span>
    <span class="token keyword">def</span> <span class="token function">maxNumberChanged</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>

    <span class="token decorator annotation punctuation">@Slot</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">setMaxNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>set_max_number<span class="token punctuation">(</span>val<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">set_max_number</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> val <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            val <span class="token operator">=</span> <span class="token number">0</span>
        
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__max_number <span class="token operator">!=</span> val<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__max_number <span class="token operator">=</span> val
            self<span class="token punctuation">.</span>maxNumberChanged<span class="token punctuation">.</span>emit<span class="token punctuation">(</span><span class="token punctuation">)</span>
            
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>__number <span class="token operator">&gt;</span> self<span class="token punctuation">.</span>__max_number<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__set_number<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__max_number<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_max_number</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__max_number

    maxNumber <span class="token operator">=</span> Property<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> get_max_number<span class="token punctuation">,</span> set_max_number<span class="token punctuation">,</span> notify<span class="token operator">=</span>maxNumberChanged<span class="token punctuation">)</span>
</code></pre></div><p>Now we have properties for the current random number, <code>number</code>, and the maximum random number, <code>maxNumber</code>. All that is left is a slot to produce a new random number. It is called <code>updateNumber</code> and simply sets a new random number.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># ...</span>
    
    <span class="token decorator annotation punctuation">@Slot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">updateNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__set_number<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>__max_number<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Finally, the number generator is exposed to QML through a root context property.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QGuiApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    engine <span class="token operator">=</span> QQmlApplicationEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    number_generator <span class="token operator">=</span> NumberGenerator<span class="token punctuation">(</span><span class="token punctuation">)</span>
    engine<span class="token punctuation">.</span>rootContext<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>setContextProperty<span class="token punctuation">(</span><span class="token string">&quot;numberGenerator&quot;</span><span class="token punctuation">,</span> number_generator<span class="token punctuation">)</span>
    
    engine<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> engine<span class="token punctuation">.</span>rootObjects<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    
    
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>In QML, we can bind to the <code>number</code> as well as the <code>maxNumber</code> properties of the <code>numberGenerator</code> object. In the <code>onClicked</code> handler of the <code>Button</code> we call the <code>updateNumber</code> method to generate a new random number and in the <code>onValueChanged</code> handler of the <code>Slider</code> we set the <code>maxNumber</code> property using the <code>setMaxNumber</code> method. This is because altering the property directly through Javascript would destroy the bindings to the property. By using the setter method explicitly, this is avoided.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Window
<span class="token keyword">import</span> QtQuick.Controls

<span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Python World!&quot;</span><span class="token punctuation">)</span></span>
    
    <span class="token class-name">Column</span> <span class="token punctuation">{</span>
        <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
            <span class="token class-name">Button</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Give me a number!&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span><span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
            <span class="token class-name">Label</span> <span class="token punctuation">{</span>
                <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberLabel</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span>number</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
            <span class="token class-name">Slider</span> <span class="token punctuation">{</span>
                <span class="token property">from</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">0</span></span>
                <span class="token property">to</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">99</span></span>
                <span class="token property">value</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span>maxNumber</span>
                <span class="token property">onValueChanged</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span><span class="token function">setMaxNumber</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h2 id="exposing-a-python-class-to-qml"><a href="#exposing-a-python-class-to-qml" class="header-anchor">#</a> Exposing a Python class to QML</h2> <p>Up until now, we’ve instantiated an object Python and used the <code>setContextProperty</code> method of the <code>rootContext</code> to make it available to QML. Being able to instantiate the object from QML allows better control over object life-cycles from QML. To enable this, we need to expose the <em>class</em>, instead of the <em>object</em>, to QML.</p> <p>The class that is being exposed to QML is not affected by where it is intantiated. No change is needed to the class definition. However, instead of calling <code>setContextProperty</code>, the <code>qmlRegisterType</code> function is used. This function comes from the <code>PySide2.QtQml</code> module and takes five arguments:</p> <ul><li>A reference to the class, <code>NumberGenerator</code> in the example below.</li> <li>A module name, <code>'Generators'</code>.</li> <li>A module version consisting of a major and minor number, <code>1</code> and <code>0</code> meaning <code>1.0</code>.</li> <li>The QML name of the class, <code>'NumberGenerator'</code></li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> random
<span class="token keyword">import</span> sys

<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QGuiApplication
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtQml <span class="token keyword">import</span> QQmlApplicationEngine<span class="token punctuation">,</span> qmlRegisterType
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QUrl<span class="token punctuation">,</span> QObject<span class="token punctuation">,</span> Signal<span class="token punctuation">,</span> Slot

<span class="token keyword">class</span> <span class="token class-name">NumberGenerator</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        QObject<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
    
    nextNumber <span class="token operator">=</span> Signal<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> arguments<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@Slot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">giveNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>nextNumber<span class="token punctuation">.</span>emit<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QGuiApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    engine <span class="token operator">=</span> QQmlApplicationEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    qmlRegisterType<span class="token punctuation">(</span>NumberGenerator<span class="token punctuation">,</span> <span class="token string">'Generators'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'NumberGenerator'</span><span class="token punctuation">)</span>
    
    engine<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> engine<span class="token punctuation">.</span>rootObjects<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    
    
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>In QML, we need to import the module, e.g. <code>Generators 1.0</code> and then instantiate the class as <code>NumberGenerator { ... }</code>. The instance now works like any other QML element.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Window
<span class="token keyword">import</span> QtQuick.Controls

<span class="token keyword">import</span> Generators

<span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Hello Python World!&quot;</span><span class="token punctuation">)</span></span>
    
    <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
        <span class="token class-name">Button</span> <span class="token punctuation">{</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Give me a number!&quot;</span><span class="token punctuation">)</span></span>
            <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator<span class="token punctuation">.</span><span class="token function">giveNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Label</span> <span class="token punctuation">{</span>
            <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberLabel</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;no number&quot;</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token class-name">NumberGenerator</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Connections</span> <span class="token punctuation">{</span>
        <span class="token property">target</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">numberGenerator</span>
        <span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">onNextNumber</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            numberLabel<span class="token punctuation">.</span>text <span class="token operator">=</span> number
        <span class="token punctuation">}</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><h2 id="a-model-from-python"><a href="#a-model-from-python" class="header-anchor">#</a> A Model from Python</h2> <p>One of the more interesting types of objects or classes to expose from Python to QML are item models. These are used with various views or the <code>Repeater</code> element to dynamically build a user interface from the model contents.</p> <p>In this section we will take an existing python utility for monitoring CPU load (and more), <code>psutil</code>, and expose it to QML via a custom made item model called <code>CpuLoadModel</code>. You can see the program in action below:</p> <p><img src="/assets/img/cpu-load-model.b4970d00.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The psutil library can be found at <a href="https://pypi.org/project/psutil/" target="_blank" rel="noopener noreferrer">https://pypi.org/project/psutil/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> .</p></div> <p><em>“psutil (process and system utilities) is a cross-platform library for retrieving information on running processes and system utilization (CPU, memory, disks, network, sensors) in Python.”</em></p> <p>You can install psutil using <code>pip install psutil</code>.</p> <p>We will use the <code>psutil.cpu_percent</code> function (<a href="https://psutil.readthedocs.io/en/latest/#psutil.cpu_percent" target="_blank" rel="noopener noreferrer">documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) to sample the CPU load per core every second. To drive the sampling we use a <code>QTimer</code>. All of this is exposed through the <code>CpuLoadModel</code> which is a <code>QAbstractListModel</code>.</p> <p>Item models are interesting. They allow you to represent a two dimensional data set, or even nested data sets, if using the <code>QAbstractItemModel</code>. The <code>QAbstractListModel</code> that we use allow us to represent a list of items, so a one dimensional set of data. It is possible to implement a nested set of lists, creating a tree, but we will only create one level.</p> <p>To implement a <code>QAbstractListModel</code>, it is necessary to implement the methods <code>rowCount</code> and <code>data</code>. The <code>rowCount</code> returns the number of CPU cores which we get using the <code>psutil.cpu_count</code> method. The <code>data</code> method returns data for different <em>roles</em>. We only support the <code>Qt.DisplayRole</code>, which corresponds to what you get when you refer to <code>display</code> inside the delegate item from QML.</p> <p>Looking at the code for the model, you can see that the actual data is stored in the <code>__cpu_load</code> list. If a valid request is made to <code>data</code>, i.e. the row, column and role is correct, we return the right element from the <code>__cpu_load</code> list. Otherwise we return <code>None</code> which corresponds to an uninitialized <code>QVariant</code> on the Qt side.</p> <p>Every time the update timer (<code>__update_timer</code>) times out, the <code>__update</code> method is triggered. Here, the <code>__cpu_load</code> list is updated, but we also emit the <code>dataChanged</code> signal, indicating that all data was changed. We do not do a <code>modelReset</code> as that also implies that the number of items might have changed.</p> <p>Finally, the <code>CpuLoadModel</code> is exposed to QML are a registered type in the <code>PsUtils</code> module.</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> psutil
<span class="token keyword">import</span> sys

<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QGuiApplication
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtQml <span class="token keyword">import</span> QQmlApplicationEngine<span class="token punctuation">,</span> qmlRegisterType
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt<span class="token punctuation">,</span> QUrl<span class="token punctuation">,</span> QTimer<span class="token punctuation">,</span> QAbstractListModel

<span class="token keyword">class</span> <span class="token class-name">CpuLoadModel</span><span class="token punctuation">(</span>QAbstractListModel<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        QAbstractListModel<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        
        self<span class="token punctuation">.</span>__cpu_count <span class="token operator">=</span> psutil<span class="token punctuation">.</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__cpu_load <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>__cpu_count
        
        self<span class="token punctuation">.</span>__update_timer <span class="token operator">=</span> QTimer<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__update_timer<span class="token punctuation">.</span>setInterval<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__update_timer<span class="token punctuation">.</span>timeout<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__update<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__update_timer<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># The first call returns invalid data</span>
        psutil<span class="token punctuation">.</span>cpu_percent<span class="token punctuation">(</span>percpu<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
            
    <span class="token keyword">def</span> <span class="token function">__update</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__cpu_load <span class="token operator">=</span> psutil<span class="token punctuation">.</span>cpu_percent<span class="token punctuation">(</span>percpu<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>dataChanged<span class="token punctuation">.</span>emit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>index<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__cpu_count<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
    <span class="token keyword">def</span> <span class="token function">rowCount</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__cpu_count
    
    <span class="token keyword">def</span> <span class="token function">data</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">,</span> role<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>role <span class="token operator">==</span> Qt<span class="token punctuation">.</span>DisplayRole <span class="token keyword">and</span>
            index<span class="token punctuation">.</span>row<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">and</span>
            index<span class="token punctuation">.</span>row<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__cpu_load<span class="token punctuation">)</span> <span class="token keyword">and</span>
            index<span class="token punctuation">.</span>column<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>__cpu_load<span class="token punctuation">[</span>index<span class="token punctuation">.</span>row<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QGuiApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    engine <span class="token operator">=</span> QQmlApplicationEngine<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    qmlRegisterType<span class="token punctuation">(</span>CpuLoadModel<span class="token punctuation">,</span> <span class="token string">'PsUtils'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'CpuLoadModel'</span><span class="token punctuation">)</span>
    
    engine<span class="token punctuation">.</span>load<span class="token punctuation">(</span>QUrl<span class="token punctuation">(</span><span class="token string">&quot;main.qml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">if</span> <span class="token keyword">not</span> engine<span class="token punctuation">.</span>rootObjects<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    
    
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div><p>On the QML side we use a <code>ListView</code> to show the CPU load. The model is bound to the <code>model</code> property. For each item in the model a <code>delegate</code> item will be instantiated. In this case that means a <code>Rectangle</code> with a green bar (another <code>Rectangle</code>) and a <code>Text</code> element displaying the current load.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Window

<span class="token keyword">import</span> PsUtils

<span class="token class-name">Window</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">root</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;CPU Load&quot;</span><span class="token punctuation">)</span></span>
    
    <span class="token class-name">ListView</span> <span class="token punctuation">{</span>
        <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
        <span class="token property">model</span><span class="token punctuation">:</span> <span class="token class-name">CpuLoadModel</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token property">delegate</span><span class="token punctuation">:</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
            <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">delegate</span>
            
            required property int display

            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>width</span>
            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">30</span></span>
            <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;white&quot;</span></span>
            
            <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
                <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">bar</span>
                <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>width <span class="token operator">*</span> delegate<span class="token punctuation">.</span>display <span class="token operator">/</span> <span class="token number">100.0</span></span>
                <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">30</span></span>
                <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;green&quot;</span></span>
            <span class="token punctuation">}</span>
            
            <span class="token class-name">Text</span> <span class="token punctuation">{</span>
                <span class="token property">anchors.verticalCenter</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>verticalCenter</span>
                <span class="token property">x</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>bar<span class="token punctuation">.</span>x <span class="token operator">+</span> bar<span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">,</span> parent<span class="token punctuation">.</span>width<span class="token operator">-</span>width<span class="token punctuation">)</span></span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">delegate<span class="token punctuation">.</span>display <span class="token operator">+</span> <span class="token string">&quot;%&quot;</span></span>
            <span class="token punctuation">}</span>   
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/qmlbook/qt6book/edit/main/docs/ch18-python/build-app.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/20/2021, 11:44:16 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ch18-python/installing.html" class="prev">
        Installing
      </a></span> <span class="next"><a href="/ch18-python/limitations.html">
        Limitations
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.85861ea8.js" defer></script><script src="/assets/js/2.26c961b2.js" defer></script><script src="/assets/js/39.2150f302.js" defer></script>
  </body>
</html>
