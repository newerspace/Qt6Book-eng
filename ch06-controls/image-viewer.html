<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An Image Viewer | The Qt 6 Book</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A book about QML">
    
    <link rel="preload" href="/assets/css/0.styles.92ea4280.css" as="style"><link rel="preload" href="/assets/js/app.85861ea8.js" as="script"><link rel="preload" href="/assets/js/2.26c961b2.js" as="script"><link rel="preload" href="/assets/js/8.e9c62eff.js" as="script"><link rel="prefetch" href="/assets/js/10.4395bd95.js"><link rel="prefetch" href="/assets/js/100.fa302cac.js"><link rel="prefetch" href="/assets/js/101.8d466e46.js"><link rel="prefetch" href="/assets/js/102.8e83581a.js"><link rel="prefetch" href="/assets/js/103.a82c478d.js"><link rel="prefetch" href="/assets/js/104.28055030.js"><link rel="prefetch" href="/assets/js/105.f0d68af0.js"><link rel="prefetch" href="/assets/js/106.bb60723a.js"><link rel="prefetch" href="/assets/js/107.7d45025a.js"><link rel="prefetch" href="/assets/js/108.0ed7a1f6.js"><link rel="prefetch" href="/assets/js/109.8946b3a4.js"><link rel="prefetch" href="/assets/js/11.b85f8031.js"><link rel="prefetch" href="/assets/js/110.11bd09cb.js"><link rel="prefetch" href="/assets/js/111.71acb487.js"><link rel="prefetch" href="/assets/js/112.fcf7de4a.js"><link rel="prefetch" href="/assets/js/113.2c5c65d1.js"><link rel="prefetch" href="/assets/js/114.d0eb4c04.js"><link rel="prefetch" href="/assets/js/115.760f698b.js"><link rel="prefetch" href="/assets/js/116.d3e7387b.js"><link rel="prefetch" href="/assets/js/117.1b1a7a03.js"><link rel="prefetch" href="/assets/js/118.e2bdad72.js"><link rel="prefetch" href="/assets/js/119.2e2f773b.js"><link rel="prefetch" href="/assets/js/12.83c6e34c.js"><link rel="prefetch" href="/assets/js/120.35cbc8cf.js"><link rel="prefetch" href="/assets/js/121.3671b29f.js"><link rel="prefetch" href="/assets/js/122.d462ba81.js"><link rel="prefetch" href="/assets/js/123.68da5c9a.js"><link rel="prefetch" href="/assets/js/124.0476127d.js"><link rel="prefetch" href="/assets/js/125.05527bc4.js"><link rel="prefetch" href="/assets/js/126.da700bd1.js"><link rel="prefetch" href="/assets/js/127.bba7328d.js"><link rel="prefetch" href="/assets/js/128.d06333ea.js"><link rel="prefetch" href="/assets/js/129.77aee385.js"><link rel="prefetch" href="/assets/js/13.b44307e8.js"><link rel="prefetch" href="/assets/js/130.b7e1846a.js"><link rel="prefetch" href="/assets/js/131.df7ded7d.js"><link rel="prefetch" href="/assets/js/132.eaa7412d.js"><link rel="prefetch" href="/assets/js/14.4daf5b31.js"><link rel="prefetch" href="/assets/js/15.8dfe57f5.js"><link rel="prefetch" href="/assets/js/16.ae047bb1.js"><link rel="prefetch" href="/assets/js/17.97cb1999.js"><link rel="prefetch" href="/assets/js/18.09368857.js"><link rel="prefetch" href="/assets/js/19.fd59ff42.js"><link rel="prefetch" href="/assets/js/20.6398077d.js"><link rel="prefetch" href="/assets/js/21.6a05a693.js"><link rel="prefetch" href="/assets/js/22.947a34c5.js"><link rel="prefetch" href="/assets/js/23.c793e061.js"><link rel="prefetch" href="/assets/js/24.d60c1260.js"><link rel="prefetch" href="/assets/js/25.f5cfb5dd.js"><link rel="prefetch" href="/assets/js/26.cdd6b54d.js"><link rel="prefetch" href="/assets/js/27.2e40b24c.js"><link rel="prefetch" href="/assets/js/28.a44092e5.js"><link rel="prefetch" href="/assets/js/29.0b58d719.js"><link rel="prefetch" href="/assets/js/3.15609819.js"><link rel="prefetch" href="/assets/js/30.13230c3d.js"><link rel="prefetch" href="/assets/js/31.02bb2aa2.js"><link rel="prefetch" href="/assets/js/32.900bae89.js"><link rel="prefetch" href="/assets/js/33.809d8313.js"><link rel="prefetch" href="/assets/js/34.b22e38fe.js"><link rel="prefetch" href="/assets/js/35.e0175be4.js"><link rel="prefetch" href="/assets/js/36.5df92709.js"><link rel="prefetch" href="/assets/js/37.2a36790b.js"><link rel="prefetch" href="/assets/js/38.7f2d9d42.js"><link rel="prefetch" href="/assets/js/39.2150f302.js"><link rel="prefetch" href="/assets/js/4.abbcf459.js"><link rel="prefetch" href="/assets/js/40.418ab892.js"><link rel="prefetch" href="/assets/js/41.8613e33c.js"><link rel="prefetch" href="/assets/js/42.fd4fbf33.js"><link rel="prefetch" href="/assets/js/43.a1d7c212.js"><link rel="prefetch" href="/assets/js/44.6668e30e.js"><link rel="prefetch" href="/assets/js/45.afe197bb.js"><link rel="prefetch" href="/assets/js/46.746cdebe.js"><link rel="prefetch" href="/assets/js/47.be6ca186.js"><link rel="prefetch" href="/assets/js/48.2f55198b.js"><link rel="prefetch" href="/assets/js/49.8cd15ae8.js"><link rel="prefetch" href="/assets/js/5.3e69f88a.js"><link rel="prefetch" href="/assets/js/50.dbabd303.js"><link rel="prefetch" href="/assets/js/51.d8b5ec87.js"><link rel="prefetch" href="/assets/js/52.12f7375a.js"><link rel="prefetch" href="/assets/js/53.eed8ca8f.js"><link rel="prefetch" href="/assets/js/54.c4d75775.js"><link rel="prefetch" href="/assets/js/55.b1783490.js"><link rel="prefetch" href="/assets/js/56.5901bd6c.js"><link rel="prefetch" href="/assets/js/57.95985066.js"><link rel="prefetch" href="/assets/js/58.d098dc2b.js"><link rel="prefetch" href="/assets/js/59.f534f5f5.js"><link rel="prefetch" href="/assets/js/6.599da621.js"><link rel="prefetch" href="/assets/js/60.0398dfb7.js"><link rel="prefetch" href="/assets/js/61.56fd70e0.js"><link rel="prefetch" href="/assets/js/62.b84b32ba.js"><link rel="prefetch" href="/assets/js/63.c521b8ab.js"><link rel="prefetch" href="/assets/js/64.2bf1e6e2.js"><link rel="prefetch" href="/assets/js/65.0a769062.js"><link rel="prefetch" href="/assets/js/66.a7c4130c.js"><link rel="prefetch" href="/assets/js/67.df2ba082.js"><link rel="prefetch" href="/assets/js/68.8a6223f5.js"><link rel="prefetch" href="/assets/js/69.216e47e2.js"><link rel="prefetch" href="/assets/js/7.4b835f9d.js"><link rel="prefetch" href="/assets/js/70.63f79832.js"><link rel="prefetch" href="/assets/js/71.f5bdf6b7.js"><link rel="prefetch" href="/assets/js/72.a8cf8fb8.js"><link rel="prefetch" href="/assets/js/73.3538ebde.js"><link rel="prefetch" href="/assets/js/74.63b1b93e.js"><link rel="prefetch" href="/assets/js/75.4d0beaa9.js"><link rel="prefetch" href="/assets/js/76.7d3c932a.js"><link rel="prefetch" href="/assets/js/77.90fe8238.js"><link rel="prefetch" href="/assets/js/78.94404738.js"><link rel="prefetch" href="/assets/js/79.ee568c52.js"><link rel="prefetch" href="/assets/js/80.e200eac0.js"><link rel="prefetch" href="/assets/js/81.634d249d.js"><link rel="prefetch" href="/assets/js/82.484db6b7.js"><link rel="prefetch" href="/assets/js/83.6154fd3d.js"><link rel="prefetch" href="/assets/js/84.24b8d4cb.js"><link rel="prefetch" href="/assets/js/85.6c107d50.js"><link rel="prefetch" href="/assets/js/86.f87351fc.js"><link rel="prefetch" href="/assets/js/87.a87dddc8.js"><link rel="prefetch" href="/assets/js/88.155ec451.js"><link rel="prefetch" href="/assets/js/89.64bcf5e9.js"><link rel="prefetch" href="/assets/js/9.fc273458.js"><link rel="prefetch" href="/assets/js/90.19f96ff1.js"><link rel="prefetch" href="/assets/js/91.6124d2ee.js"><link rel="prefetch" href="/assets/js/92.e625e357.js"><link rel="prefetch" href="/assets/js/93.a66de41e.js"><link rel="prefetch" href="/assets/js/94.56f157b5.js"><link rel="prefetch" href="/assets/js/95.9677e971.js"><link rel="prefetch" href="/assets/js/96.c4114f1e.js"><link rel="prefetch" href="/assets/js/97.d64a40ed.js"><link rel="prefetch" href="/assets/js/98.c46e9482.js"><link rel="prefetch" href="/assets/js/99.c23f6710.js">
    <link rel="stylesheet" href="/assets/css/0.styles.92ea4280.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">The Qt 6 Book</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/qmlbook/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/qmlbook/qt6book" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/preface/preface" class="sidebar-heading clickable"><span>Preface</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/preface/preface.html" class="sidebar-link">Welcome!</a></li><li><a href="/preface/acknowledgements.html" class="sidebar-link">Acknowledgements</a></li><li><a href="/preface/authors.html" class="sidebar-link">Authors</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch01-meetqt/meet-qt" class="sidebar-heading clickable"><span>Meet Qt</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch01-meetqt/meet-qt.html" class="sidebar-link">Qt and Qt Quick</a></li><li><a href="/ch01-meetqt/blocks.html" class="sidebar-link">Qt Building Blocks</a></li><li><a href="/ch01-meetqt/intro.html" class="sidebar-link">Qt 6 Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch02-start/quick-start" class="sidebar-heading clickable"><span>Getting Started</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch02-start/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/ch02-start/install.html" class="sidebar-link">Installing Qt 6 SDK</a></li><li><a href="/ch02-start/hello-world.html" class="sidebar-link">Hello World</a></li><li><a href="/ch02-start/app-types.html" class="sidebar-link">Application Types</a></li><li><a href="/ch02-start/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch03-qtcreator/qt-creator" class="sidebar-heading clickable"><span>Qt Creator IDE</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch03-qtcreator/qt-creator.html" class="sidebar-link">Qt Creator IDE</a></li><li><a href="/ch03-qtcreator/user-interface.html" class="sidebar-link">The User Interface</a></li><li><a href="/ch03-qtcreator/kit-registry.html" class="sidebar-link">Registering your Qt Kit</a></li><li><a href="/ch03-qtcreator/projects.html" class="sidebar-link">Managing Projects</a></li><li><a href="/ch03-qtcreator/editor.html" class="sidebar-link">Using the Editor</a></li><li><a href="/ch03-qtcreator/locator.html" class="sidebar-link">Locator</a></li><li><a href="/ch03-qtcreator/debugging.html" class="sidebar-link">Debugging</a></li><li><a href="/ch03-qtcreator/shortcuts.html" class="sidebar-link">Shortcuts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch04-qmlstart/quick-start" class="sidebar-heading clickable"><span>Quick Starter</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch04-qmlstart/quick-start.html" class="sidebar-link">Quick Starter</a></li><li><a href="/ch04-qmlstart/qml-syntax.html" class="sidebar-link">QML Syntax</a></li><li><a href="/ch04-qmlstart/core-elements.html" class="sidebar-link">Core Elements</a></li><li><a href="/ch04-qmlstart/components.html" class="sidebar-link">Components</a></li><li><a href="/ch04-qmlstart/transformations.html" class="sidebar-link">Simple Transformations</a></li><li><a href="/ch04-qmlstart/positioning.html" class="sidebar-link">Positioning Elements</a></li><li><a href="/ch04-qmlstart/layout.html" class="sidebar-link">Layout Items</a></li><li><a href="/ch04-qmlstart/input.html" class="sidebar-link">Input Elements</a></li><li><a href="/ch04-qmlstart/advanced.html" class="sidebar-link">Advanced Techniques</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch05-fluid/fluid-elements" class="sidebar-heading clickable"><span>Fluid Elements</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch05-fluid/fluid-elements.html" class="sidebar-link">Fluid Elements</a></li><li><a href="/ch05-fluid/animations.html" class="sidebar-link">Animations</a></li><li><a href="/ch05-fluid/states-transitions.html" class="sidebar-link">States and Transitions</a></li><li><a href="/ch05-fluid/advanced.html" class="sidebar-link">Advanced Techniques</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch06-controls/controls2" class="sidebar-heading clickable open"><span>QtQuick Controls</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch06-controls/controls2.html" class="sidebar-link">UI Controls</a></li><li><a href="/ch06-controls/introduction.html" class="sidebar-link">Introduction to Controls</a></li><li><a href="/ch06-controls/image-viewer.html" aria-current="page" class="active sidebar-link">An Image Viewer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ch06-controls/image-viewer.html#the-desktop-version" class="sidebar-link">The Desktop Version</a></li><li class="sidebar-sub-header"><a href="/ch06-controls/image-viewer.html#moving-to-mobile" class="sidebar-link">Moving to Mobile</a></li><li class="sidebar-sub-header"><a href="/ch06-controls/image-viewer.html#a-shared-codebase" class="sidebar-link">A Shared Codebase</a></li><li class="sidebar-sub-header"><a href="/ch06-controls/image-viewer.html#native-dialogs" class="sidebar-link">Native Dialogs</a></li></ul></li><li><a href="/ch06-controls/common-patterns.html" class="sidebar-link">Common Patterns</a></li><li><a href="/ch06-controls/imagine-style.html" class="sidebar-link">The Imagine Style</a></li><li><a href="/ch06-controls/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch07-modelview/model-view" class="sidebar-heading clickable"><span>Model View</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch07-modelview/model-view.html" class="sidebar-link">Model-View-Delegate</a></li><li><a href="/ch07-modelview/concept.html" class="sidebar-link">Concept</a></li><li><a href="/ch07-modelview/basic-models.html" class="sidebar-link">Basic Models</a></li><li><a href="/ch07-modelview/dynamic-views.html" class="sidebar-link">Dynamic Views</a></li><li><a href="/ch07-modelview/delegate.html" class="sidebar-link">Delegate</a></li><li><a href="/ch07-modelview/advanced.html" class="sidebar-link">Advanced Techniques</a></li><li><a href="/ch07-modelview/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch08-canvas/canvas-element" class="sidebar-heading clickable"><span>Canvas</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch08-canvas/canvas-element.html" class="sidebar-link">Canvas Element</a></li><li><a href="/ch08-canvas/convenience-api.html" class="sidebar-link">Convenience API</a></li><li><a href="/ch08-canvas/gradients.html" class="sidebar-link">Gradients</a></li><li><a href="/ch08-canvas/shadows.html" class="sidebar-link">Shadows</a></li><li><a href="/ch08-canvas/images.html" class="sidebar-link">Images</a></li><li><a href="/ch08-canvas/transformation.html" class="sidebar-link">Transformation</a></li><li><a href="/ch08-canvas/composition-modes.html" class="sidebar-link">Composition Modes</a></li><li><a href="/ch08-canvas/pixel-buffer.html" class="sidebar-link">Pixel Buffers</a></li><li><a href="/ch08-canvas/canvas-paint.html" class="sidebar-link">Canvas Paint</a></li><li><a href="/ch08-canvas/port-from-html.html" class="sidebar-link">Porting from HTML5 Canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch09-shapes/shapes" class="sidebar-heading clickable"><span>Shapes</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch09-shapes/shapes.html" class="sidebar-link">Shapes</a></li><li><a href="/ch09-shapes/basics.html" class="sidebar-link">A Basic Shape</a></li><li><a href="/ch09-shapes/paths.html" class="sidebar-link">Building Paths</a></li><li><a href="/ch09-shapes/gradients.html" class="sidebar-link">Filling Shapes</a></li><li><a href="/ch09-shapes/animations.html" class="sidebar-link">Animating Shapes</a></li><li><a href="/ch09-shapes/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch10-effects/effects" class="sidebar-heading clickable"><span>Effects</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch10-effects/effects.html" class="sidebar-link">Effects in QML</a></li><li><a href="/ch10-effects/particles.html" class="sidebar-link">Particle Concept</a></li><li><a href="/ch10-effects/simple-simulation.html" class="sidebar-link">Simple Simulation</a></li><li><a href="/ch10-effects/particle-parameters.html" class="sidebar-link">Particle Parameters</a></li><li><a href="/ch10-effects/directed-particles.html" class="sidebar-link">Directed Particles</a></li><li><a href="/ch10-effects/affecting-particles.html" class="sidebar-link">Affecting Particles</a></li><li><a href="/ch10-effects/particle-groups.html" class="sidebar-link">Particle Groups</a></li><li><a href="/ch10-effects/particle-painters.html" class="sidebar-link">Particle Painters</a></li><li><a href="/ch10-effects/opengl-shaders.html" class="sidebar-link">Graphics Shaders</a></li><li><a href="/ch10-effects/shader-elements.html" class="sidebar-link">Shader Elements</a></li><li><a href="/ch10-effects/fragment-shaders.html" class="sidebar-link">Fragment Shaders</a></li><li><a href="/ch10-effects/wave-effect.html" class="sidebar-link">Wave Effect</a></li><li><a href="/ch10-effects/vertex-shader.html" class="sidebar-link">Vertex Shader</a></li><li><a href="/ch10-effects/curtain-effect.html" class="sidebar-link">Curtain Effect</a></li><li><a href="/ch10-effects/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch11-multimedia/multimedia" class="sidebar-heading clickable"><span>Multimedia</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch11-multimedia/multimedia.html" class="sidebar-link">Multimedia</a></li><li><a href="/ch11-multimedia/playing-media.html" class="sidebar-link">Playing Media</a></li><li><a href="/ch11-multimedia/sound-effects.html" class="sidebar-link">Sound Effects</a></li><li><a href="/ch11-multimedia/video-streams.html" class="sidebar-link">Video Streams</a></li><li><a href="/ch11-multimedia/capturing-images.html" class="sidebar-link">Capturing Images</a></li><li><a href="/ch11-multimedia/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch12-networking/networking" class="sidebar-heading clickable"><span>Networking</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch12-networking/networking.html" class="sidebar-link">Networking</a></li><li><a href="/ch12-networking/serve-qml.html" class="sidebar-link">Serving UI via HTTP</a></li><li><a href="/ch12-networking/templates.html" class="sidebar-link">Templates</a></li><li><a href="/ch12-networking/http-requests.html" class="sidebar-link">HTTP Requests</a></li><li><a href="/ch12-networking/local-files.html" class="sidebar-link">Local files</a></li><li><a href="/ch12-networking/rest-api.html" class="sidebar-link">REST API</a></li><li><a href="/ch12-networking/authentication.html" class="sidebar-link">Authentication using OAuth</a></li><li><a href="/ch12-networking/web-sockets.html" class="sidebar-link">Web Sockets</a></li><li><a href="/ch12-networking/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch13-storage/storage" class="sidebar-heading clickable"><span>Storage</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch13-storage/storage.html" class="sidebar-link">Storage</a></li><li><a href="/ch13-storage/settings.html" class="sidebar-link">Settings</a></li><li><a href="/ch13-storage/local-storage.html" class="sidebar-link">Local Storage - SQL</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch14-dynamicqml/dynamic-qml" class="sidebar-heading clickable"><span>Dynamic QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch14-dynamicqml/dynamic-qml.html" class="sidebar-link">Dynamic QML</a></li><li><a href="/ch14-dynamicqml/loading-components.html" class="sidebar-link">Loading Components Dynamically</a></li><li><a href="/ch14-dynamicqml/dynamic-objects.html" class="sidebar-link">Creating and Destroying Objects</a></li><li><a href="/ch14-dynamicqml/tracking-objects.html" class="sidebar-link">Tracking Dynamic Objects</a></li><li><a href="/ch14-dynamicqml/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch15-javascript/javascript" class="sidebar-heading clickable"><span>Javascript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch15-javascript/javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/ch15-javascript/html-qml.html" class="sidebar-link">Browser/HTML vs Qt Quick/QML</a></li><li><a href="/ch15-javascript/js-language.html" class="sidebar-link">JS Language</a></li><li><a href="/ch15-javascript/js-objects.html" class="sidebar-link">JS Objects</a></li><li><a href="/ch15-javascript/js-console.html" class="sidebar-link">Creating a JS Console</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch16-qtcpp/qtcpp" class="sidebar-heading clickable"><span>Qt C++</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch16-qtcpp/qtcpp.html" class="sidebar-link">Qt and C++</a></li><li><a href="/ch16-qtcpp/boilerplate.html" class="sidebar-link">A Boilerplate Application</a></li><li><a href="/ch16-qtcpp/qobject.html" class="sidebar-link">The QObject</a></li><li><a href="/ch16-qtcpp/build-system.html" class="sidebar-link">Build Systems</a></li><li><a href="/ch16-qtcpp/common-classes.html" class="sidebar-link">Common Qt Classes</a></li><li><a href="/ch16-qtcpp/cpp-models.html" class="sidebar-link">Models in C++</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch17-extensions/extending-qml" class="sidebar-heading clickable"><span>Extending QML</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch17-extensions/extending-qml.html" class="sidebar-link">Extending QML with C++</a></li><li><a href="/ch17-extensions/qml-runtime.html" class="sidebar-link">Understanding the QML Run-time</a></li><li><a href="/ch17-extensions/plugin-content.html" class="sidebar-link">Plugin Content</a></li><li><a href="/ch17-extensions/create-plugin.html" class="sidebar-link">Creating the plugin</a></li><li><a href="/ch17-extensions/fileio-demo.html" class="sidebar-link">FileIO Implementation</a></li><li><a href="/ch17-extensions/using-fileio.html" class="sidebar-link">Using FileIO</a></li><li><a href="/ch17-extensions/summary.html" class="sidebar-link">Summary</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/ch18-python/qt-python" class="sidebar-heading clickable"><span>Qt for Python</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ch18-python/qt-python.html" class="sidebar-link">Qt for Python</a></li><li><a href="/ch18-python/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/ch18-python/installing.html" class="sidebar-link">Installing</a></li><li><a href="/ch18-python/build-app.html" class="sidebar-link">Building an Application</a></li><li><a href="/ch18-python/limitations.html" class="sidebar-link">Limitations</a></li><li><a href="/ch18-python/summary.html" class="sidebar-link">Summary</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="an-image-viewer"><a href="#an-image-viewer" class="header-anchor">#</a> An Image Viewer</h1> <p>Let’s look at a larger example of how Qt Quick Controls are used. For this, we will create a simple image viewer.</p> <p>First, we create it for desktop using the Fusion style, then we will refactor it for a mobile experience before having a look at the final code base.</p> <h2 id="the-desktop-version"><a href="#the-desktop-version" class="header-anchor">#</a> The Desktop Version</h2> <p>The desktop version is based around a classic application window with a menu bar, a tool bar and a document area. The application can be seen in action below.</p> <p><img src="/assets/img/viewer-window.5ba76420.png" alt=""></p> <p>We use the Qt Creator project template for an empty Qt Quick application as a starting point. However, we replace the default <code>Window</code> element from the template with a <code>ApplicationWindow</code> from the <code>QtQuick.Controls</code> module. The code below shows <code>main.qml</code> where the window itself is created and setup with a default size and title.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Controls
<span class="token keyword">import</span> Qt.labs.platform

<span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The <code>ApplicationWindow</code> consists of four main areas as shown below. The menu bar, tool bar and status bar are usually populated by instances of <code>MenuBar</code>, <code>ToolBar</code> or <code>TabBar</code> controls, while the contents area is where the children of the window go. Notice that the image viewer application does not feature a status bar; that is why it is missing from the code show here, as well as from the figure above.</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>As we are targeting desktop, we enforce the use of the <em>Fusion</em> style. This can be done via a configuration file, environment variables, command line arguments, or programmatically in the C++ code. We do it the latter way by adding the following line to <code>main.cpp</code>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token class-name">QQuickStyle</span><span class="token operator">::</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token string">&quot;Fusion&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>We then start building the user interface in <code>main.qml</code> by adding an <code>Image</code> element as the contents. This element will hold the images when the user opens them, so for now it is just a placeholder. The <code>background</code> property is used to provide an element to the window to place behind the contents. This will be shown when there is no image loaded, and as borders around the image if the aspect ratio does not let it fill the contents area of the window.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;darkGray&quot;</span></span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Image</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">image</span>
        <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
        <span class="token property">fillMode</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Image<span class="token punctuation">.</span>PreserveAspectFit</span>
        <span class="token property">asynchronous</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>We then continue by adding the <code>ToolBar</code>. This is done using the <code>toolBar</code> property of the window. Inside the tool bar we add a <code>Flow</code> element which will let the contents fill the width of the control before overflowing to a new row. Inside the flow we place a <code>ToolButton</code>.</p> <p>The <code>ToolButton</code> has a couple of interesting properties. The <code>text</code> is straight forward. However, the <code>icon.name</code> is taken from the <a href="https://specifications.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html" target="_blank" rel="noopener noreferrer">freedesktop.org Icon Naming Specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. In that document, a list of standard icons are listed by name. By refering to such a name, Qt will pick out the correct icon from the current desktop theme.</p> <p>In the <code>onClicked</code> signal handler of the <code>ToolButton</code> is the final piece of code. It calls the <code>open</code> method on the <code>fileOpenDialog</code> element.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">header</span><span class="token punctuation">:</span> <span class="token class-name">ToolBar</span> <span class="token punctuation">{</span>
        <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
            <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
            <span class="token class-name">ToolButton</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Open&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">icon.name</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;document-open&quot;</span></span>
                <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">fileOpenDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The <code>fileOpenDialog</code> element is a <code>FileDialog</code> control from the <code>Qt.labs.platform</code> module. The file dialog can be used to open or save files.</p> <p>In the code we start by assigning a <code>title</code>. Then we set the starting folder using the <code>StandardsPaths</code> class. The <code>StandardsPaths</code> classholds links to common folders such as the user’s home, documents, and so on. After that we set a name filter that controls which files the user can see and pick using the dialog.</p> <p>Finally, we reach the <code>onAccepted</code> signal handler where the <code>Image</code> element that holds the window contents is set to show the selected file. There is an <code>onRejected</code> signal as well, but we do not need to handle it in the image viewer application.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token class-name">FileDialog</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">fileOpenDialog</span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Select an image file&quot;</span></span>
        <span class="token property">folder</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">StandardPaths<span class="token punctuation">.</span><span class="token function">writableLocation</span><span class="token punctuation">(</span>StandardPaths<span class="token punctuation">.</span>DocumentsLocation<span class="token punctuation">)</span></span>
        <span class="token property">nameFilters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;Image files (*.png *.jpeg *.jpg)&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token property">onAccepted</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
            image<span class="token punctuation">.</span>source <span class="token operator">=</span> fileOpenDialog<span class="token punctuation">.</span>fileUrl
        <span class="token punctuation">}</span></span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>We then continue with the <code>MenuBar</code>. To create a menu, one puts <code>Menu</code> elements inside the menu bar, and then populates each <code>Menu</code> with <code>MenuItem</code> elements.</p> <p>In the code below, we create two menus, <em>File</em> and <em>Help</em>. Under <em>File</em>, we place <em>Open</em> using the same icon and action as the tool button in the tool bar. Under <em>Help</em>, you find <em>About</em> which triggers a call to the <code>open</code> method of the <code>aboutDialog</code> element.</p> <p>Notice that the ampersands (“&amp;”) in the <code>title</code> property of the <code>Menu</code> and the <code>text</code> property of the <code>MenuItem</code> turn the following character into a keyboard shortcut; e.g. you reach the file menu by pressing <em>Alt+F</em>, followed by <em>Alt+O</em> to trigger the open item.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">menuBar</span><span class="token punctuation">:</span> <span class="token class-name">MenuBar</span> <span class="token punctuation">{</span>
        <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
            <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;File&quot;</span><span class="token punctuation">)</span></span>
            <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Open...&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">icon.name</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;document-open&quot;</span></span>
                <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">fileOpenDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
            <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Help&quot;</span><span class="token punctuation">)</span></span>
            <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;About...&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">aboutDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The <code>aboutDialog</code> element is based on the <code>Dialog</code> control from the <code>QtQuick.Controls</code> module, which is the base for custom dialogs. The dialog we are about to create is shown in the figure below.</p> <p><img src="/assets/img/viewer-about.60a522f9.png" alt=""></p> <p>The code for the <code>aboutDialog</code> can be split into three parts. First, we setup the dialog window with a title. Then, we provide some contents for the dialog – in this case, a <code>Label</code> control. Finally, we opt to use a standard <em>Ok</em> button to close the dialog.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token class-name">Dialog</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">aboutDialog</span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;About&quot;</span><span class="token punctuation">)</span></span>
        <span class="token class-name">Label</span> <span class="token punctuation">{</span>
            <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;QML Image Viewer\nA part of the QmlBook\nhttp://qmlbook.org&quot;</span><span class="token punctuation">)</span></span>
            <span class="token property">horizontalAlignment</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Text<span class="token punctuation">.</span>AlignHCenter</span>
        <span class="token punctuation">}</span>

        <span class="token property">standardButtons</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">StandardButton<span class="token punctuation">.</span>Ok</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The end result of all this is a functional, albeit simple, desktop application for viewing images.</p> <h2 id="moving-to-mobile"><a href="#moving-to-mobile" class="header-anchor">#</a> Moving to Mobile</h2> <p>There are a number of differences in how a user interface is expected to look and behave on a mobile device compared to a desktop application. The biggest difference for our application is how the actions are accessed. Instead of a menu bar and a tool bar, we will use a drawer from which the user can pick the actions. The drawer can be swiped in from the side, but we also offer a hamburger button in the header. The resulting application with the drawer open can be seen below.</p> <p><img src="/assets/img/viewer-mobile-drawer.0f3cdd6f.png" alt=""></p> <p>First of all, we need to change the style that is set in <code>main.cpp</code> from <em>Fusion</em> to <em>Material</em>:</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token class-name">QQuickStyle</span><span class="token operator">::</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token string">&quot;Material&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Then we start adapting the user interface. We start by replacing the menu with a drawer. In the code below, the <code>Drawer</code> component is added as a child to the <code>ApplicationWindow</code>. Inside the drawer, we put a <code>ListView</code> containing <code>ItemDelegate</code> instances. It also contains a <code>ScrollIndicator</code> used to show which part of a long list is being shown. As our list only consists of two items, the indicator is not visible in this example.</p> <p>The drawer's <code>ListView</code> is populated from a <code>ListModel</code> where each <code>ListItem</code> corresponds to a menu item. Each time an item is clicked, in the <code>onClicked</code> method, the <code>triggered</code> method of the corresponding <code>ListItem</code> is called. This way, we can use a single delegate to trigger different actions.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window</span>

    <span class="token class-name">Drawer</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">drawer</span>

        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>width<span class="token punctuation">,</span> window<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span></span>
        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window<span class="token punctuation">.</span>height</span>

        <span class="token class-name">ListView</span> <span class="token punctuation">{</span>
            <span class="token property">focus</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
            <span class="token property">currentIndex</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token operator">-</span><span class="token number">1</span></span>
            <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>

            <span class="token property">delegate</span><span class="token punctuation">:</span> <span class="token class-name">ItemDelegate</span> <span class="token punctuation">{</span>
                <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>width</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">model<span class="token punctuation">.</span>text</span>
                <span class="token property">highlighted</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">ListView<span class="token punctuation">.</span>isCurrentItem</span>
                <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
                    drawer<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    model<span class="token punctuation">.</span><span class="token function">triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span></span>
            <span class="token punctuation">}</span>

            <span class="token property">model</span><span class="token punctuation">:</span> <span class="token class-name">ListModel</span> <span class="token punctuation">{</span>
                <span class="token class-name">ListElement</span> <span class="token punctuation">{</span>
                    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Open...&quot;</span><span class="token punctuation">)</span></span>
                    <span class="token property">triggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> fileOpenDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
                <span class="token punctuation">}</span>
                <span class="token class-name">ListElement</span> <span class="token punctuation">{</span>
                    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;About...&quot;</span><span class="token punctuation">)</span></span>
                    <span class="token property">triggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> aboutDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token property">ScrollIndicator.vertical</span><span class="token punctuation">:</span> <span class="token class-name">ScrollIndicator</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The next change is in the <code>header</code> of the <code>ApplicationWindow</code>. Instead of a desktop style toolbar, we add a button to open the drawer and a label for the title of our application.</p> <p><img src="/assets/img/viewer-mobile.97709898.png" alt=""></p> <p>The <code>ToolBar</code> contains two child elements: a <code>ToolButton</code> and a <code>Label</code>.</p> <p>The <code>ToolButton</code> control opens the drawer. The corresponding <code>close</code> call can be found in the <code>ListView</code> delegate. When an item has been selected, the drawer is closed. The icon used for the <code>ToolButton</code> comes from the <a href="https://material.io/tools/icons/?style=baseline" target="_blank" rel="noopener noreferrer">Material Design Icons page<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">header</span><span class="token punctuation">:</span> <span class="token class-name">ToolBar</span> <span class="token punctuation">{</span>
        <span class="token class-name">ToolButton</span> <span class="token punctuation">{</span>
            <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">menuButton</span>
            <span class="token property">anchors.left</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>left</span>
            <span class="token property">anchors.verticalCenter</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent<span class="token punctuation">.</span>verticalCenter</span>
            <span class="token property">icon.source</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;images/baseline-menu-24px.svg&quot;</span></span>
            <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">drawer<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Label</span> <span class="token punctuation">{</span>
            <span class="token property">anchors.centerIn</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
            <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Image Viewer&quot;</span></span>
            <span class="token property">font.pixelSize</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">20</span></span>
            <span class="token property">elide</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Label<span class="token punctuation">.</span>ElideRight</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Finally we make the background of the toolbar pretty — or at least orange. To do this, we alter the <code>Material.background</code> attached property. This comes from the <code>QtQuick.Controls.Material</code> module and only affects the Material style.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick.Controls.Material

<span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token property">header</span><span class="token punctuation">:</span> <span class="token class-name">ToolBar</span> <span class="token punctuation">{</span>
        <span class="token property">Material.background</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Material<span class="token punctuation">.</span>Orange</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>With these few changes we have converted our desktop image viewer to a mobile-friendly version.</p> <h2 id="a-shared-codebase"><a href="#a-shared-codebase" class="header-anchor">#</a> A Shared Codebase</h2> <p>In the past two sections we have looked at an image viewer developed for desktop use and then adapted it to mobile.</p> <p>Looking at the code base, much of the code is still shared. The parts that are shared are mostly associated with the document of the application, i.e. the image. The changes have accounted for the different interaction patterns of desktop and mobile, respectively. Naturally, we would want to unify these code bases. QML supports this through the use of <em>file selectors</em>.</p> <p>A file selector lets us replace individual files based on which selectors are active. The Qt documentation maintains a list of selectors in the documentation for the <code>QFileSelector</code> class (<a href="https://doc.qt.io/qt-5/qfileselector.html" target="_blank" rel="noopener noreferrer">link<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). In our case, we will make the desktop version the default and replace selected files when the <em>android</em> selector is encountered. During development you can set the environment variable <code>QT_FILE_SELECTORS</code> to <code>android</code> to simulate this.</p> <div class="custom-block tip"><p class="custom-block-title">File Selector</p> <p>File selectors work by replacing files with an alternative when a <em>selector</em> is present.</p> <p>By creating a directory named <code>+selector</code> (where <code>selector</code> represents the name of a selector) in the same directory as the files that you want to replace, you can then place files with the same name as the file you want to replace inside the directory. When the selector is present, the file in the directory will be picked instead of the original file.</p> <p>The selectors are based on the platform: e.g. android, ios, osx, linux, qnx, and so on. They can also include the name of the Linux distribution used (if identified), e.g. debian, ubuntu, fedora. Finally, they also include the locale, e.g. en_US, sv_SE, etc.</p> <p>It is also possible to add your own custom selectors.</p></div> <p>The first step to do this change is to isolate the shared code. We do this by creating the <code>ImageViewerWindow</code> element which will be used instead of the <code>ApplicationWindow</code> for both of our variants. This will consist of the dialogs, the <code>Image</code> element and the background. In order to make the open methods of the dialogs available to the platform specific code, we need to expose them through the functions <code>openFileDialog</code> and <code>openAboutDialog</code>.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Controls
<span class="token keyword">import</span> Qt.labs.platform

<span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    <span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">openFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> fileOpenDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
    <span class="token javascript-function language-javascript"><span class="token keyword">function</span> <span class="token function">openAboutDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> aboutDialog<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>

    <span class="token property">visible</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Image Viewer&quot;</span><span class="token punctuation">)</span></span>

    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;darkGray&quot;</span></span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Image</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">image</span>
        <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
        <span class="token property">fillMode</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">Image<span class="token punctuation">.</span>PreserveAspectFit</span>
        <span class="token property">asynchronous</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token boolean">true</span></span>
    <span class="token punctuation">}</span>

    <span class="token class-name">FileDialog</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">fileOpenDialog</span>

        <span class="token comment">// ...</span>

    <span class="token punctuation">}</span>

    <span class="token class-name">Dialog</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">aboutDialog</span>

        <span class="token comment">// ...</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Next, we create a new <code>main.qml</code> for our default style <em>Fusion</em>, i.e. the desktop version of the user interface.</p> <p>Here, we base the user interface around the <code>ImageViewerWindow</code> instead of the <code>ApplicationWindow</code>. Then we add the platform specific parts to it, e.g. the <code>MenuBar</code> and <code>ToolBar</code>. The only changes to these is that the calls to open the respective dialogs are made to the new functions instead of directly to the dialog controls.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Controls

<span class="token class-name">ImageViewerWindow</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">640</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">480</span></span>
    
    <span class="token property">menuBar</span><span class="token punctuation">:</span> <span class="token class-name">MenuBar</span> <span class="token punctuation">{</span>
        <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
            <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;File&quot;</span><span class="token punctuation">)</span></span>
            <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Open...&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">icon.name</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;document-open&quot;</span></span>
                <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window<span class="token punctuation">.</span><span class="token function">openFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Menu</span> <span class="token punctuation">{</span>
            <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;Help&quot;</span><span class="token punctuation">)</span></span>
            <span class="token class-name">MenuItem</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;About...&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">onTriggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window<span class="token punctuation">.</span><span class="token function">openAboutDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token property">header</span><span class="token punctuation">:</span> <span class="token class-name">ToolBar</span> <span class="token punctuation">{</span>
        <span class="token class-name">Flow</span> <span class="token punctuation">{</span>
            <span class="token property">anchors.fill</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">parent</span>
            <span class="token class-name">ToolButton</span> <span class="token punctuation">{</span>
                <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Open&quot;</span><span class="token punctuation">)</span></span>
                <span class="token property">icon.name</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;document-open&quot;</span></span>
                <span class="token property">onClicked</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window<span class="token punctuation">.</span><span class="token function">openFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Next, we have to create a mobile specific <code>main.qml</code>. This will be based around the <em>Material</em> theme. Here, we keep the <code>Drawer</code> and the mobile-specific toolbar. Again, the only change is how the dialogs are opened.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Controls
<span class="token keyword">import</span> QtQuick.Controls.Material

<span class="token class-name">ImageViewerWindow</span> <span class="token punctuation">{</span>
    <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">window</span>

    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">360</span></span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token number">520</span></span>

    <span class="token class-name">Drawer</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">drawer</span>

        <span class="token comment">// ...</span>

        <span class="token class-name">ListView</span> <span class="token punctuation">{</span>

            <span class="token comment">// ...</span>

            <span class="token property">model</span><span class="token punctuation">:</span> <span class="token class-name">ListModel</span> <span class="token punctuation">{</span>
                <span class="token class-name">ListElement</span> <span class="token punctuation">{</span>
                    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;Open...&quot;</span><span class="token punctuation">)</span></span>
                    <span class="token property">triggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> window<span class="token punctuation">.</span><span class="token function">openFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
                <span class="token punctuation">}</span>
                <span class="token class-name">ListElement</span> <span class="token punctuation">{</span>
                    <span class="token property">text</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token function">qsTr</span><span class="token punctuation">(</span><span class="token string">&quot;About...&quot;</span><span class="token punctuation">)</span></span>
                    <span class="token property">triggered</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> window<span class="token punctuation">.</span><span class="token function">openAboutDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// ...</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token property">header</span><span class="token punctuation">:</span> <span class="token class-name">ToolBar</span> <span class="token punctuation">{</span>

        <span class="token comment">// ...</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The two <code>main.qml</code> files are placed in the file system as shown below. This lets the file selector that the QML engine automatically creates pick the right file. By default, the <em>Fusion</em> <code>main.qml</code> is loaded. If the <code>android</code> selector is present, then the <em>Material</em> <code>main.qml</code> is loaded instead.</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>Until now the style has been set in in <code>main.cpp</code>. We could continue doing this and use <code>#ifdef</code> expressions to set different styles for different platforms. Instead we will use the file selector mechanism again and set the style using a configuration file. Below, you can see the file for the <em>Material</em> style, but the <em>Fusion</em> file is equally simple.</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[Controls]</span>
<span class="token constant">Style</span><span class="token attr-value"><span class="token punctuation">=</span>Material</span>
</code></pre></div><p>These changes has given us a joined codebase where all the document code is shared and only the differences in user interaction patterns differ. There are different ways to do this, e.g. keeping the document in a specific component that is included in the platform specific interfaces, or as in this example, by creating a common base that is extended by each platform. The best approach is best determined when you know how your specific code base looks and can decide how to separate the common from the unique.</p> <h2 id="native-dialogs"><a href="#native-dialogs" class="header-anchor">#</a> Native Dialogs</h2> <p>When using the image viewer you will notice that it uses a non-standard file selector dialog. This makes it look out of place.</p> <p>The <code>Qt.labs.platform</code> module can help us solve this. It provides QML bindings to native dialogs such as the file dialog, font dialog and colour dialog. It also provides APIs to create system tray icons, as well as system global menus that sits on top of the screen (e.g. as in OS X). The cost of this is a dependency on the <code>QtWidgets</code> module, as the widget based dialog is used as a fallback where the native support is missing.</p> <p>In order to integrate a native file dialog into the image viewer, we need to import the <code>Qt.labs.platform</code> module. As this module has name clashes with the <code>QtQuick.Dialogs</code> module which it replaces, it is important to remove the old import statement.</p> <p>In the actual file dialog element, we have to change how the <code>folder</code> property is set, and ensure that the <code>onAccepted</code> handler uses the <code>file</code> property instead of the <code>fileUrl</code> property. Apart from these details, the usage is identical to the <code>FileDialog</code> from <code>QtQuick.Dialogs</code>.</p> <div class="language-qml extra-class"><pre class="language-qml"><code><span class="token keyword">import</span> QtQuick
<span class="token keyword">import</span> QtQuick.Controls
<span class="token keyword">import</span> Qt.labs.platform

<span class="token class-name">ApplicationWindow</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// ...</span>
    
    <span class="token class-name">FileDialog</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">fileOpenDialog</span>
        <span class="token property">title</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token string">&quot;Select an image file&quot;</span></span>
        <span class="token property">folder</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript">StandardPaths<span class="token punctuation">.</span><span class="token function">writableLocation</span><span class="token punctuation">(</span>StandardPaths<span class="token punctuation">.</span>DocumentsLocation<span class="token punctuation">)</span></span>
        <span class="token property">nameFilters</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;Image files (*.png *.jpeg *.jpg)&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
        <span class="token property">onAccepted</span><span class="token punctuation">:</span> <span class="token javascript-expression language-javascript"><span class="token punctuation">{</span>
            image<span class="token punctuation">.</span>source <span class="token operator">=</span> fileOpenDialog<span class="token punctuation">.</span>file
        <span class="token punctuation">}</span></span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>In addition to the QML changes, we also need to alter the project file of the image viewer to include the <code>widgets</code> module.</p> <div class="language- extra-class"><pre class="language-text"><code>QT += quick quickcontrols2 widgets
</code></pre></div><p>And we need to update <code>main.qml</code> to instantiate a <code>QApplication</code> object instead of a <code>QGuiApplication</code> object. This is because the <code>QGuiApplication</code> class contains the minimal environment needed for a graphical application, while <code>QApplication</code> extends <code>QGuiApplication</code> with features needed to support <code>QtWidgets</code>.</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code>include <span class="token operator">&lt;</span>QApplication<span class="token operator">&gt;</span>

<span class="token comment">// ...</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre></div><p>With these changes, the image viewer will now use native dialogs on most platforms. The platforms supported are iOS, Linux (with a GTK+ platform theme), macOS, Windows and WinRT. For Android, it will use a default Qt dialog provided by the <code>QtWidgets</code> module.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/qmlbook/qt6book/edit/main/docs/ch06-controls/image-viewer.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/6/2021, 4:47:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ch06-controls/introduction.html" class="prev">
        Introduction to Controls
      </a></span> <span class="next"><a href="/ch06-controls/common-patterns.html">
        Common Patterns
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.85861ea8.js" defer></script><script src="/assets/js/2.26c961b2.js" defer></script><script src="/assets/js/8.e9c62eff.js" defer></script>
  </body>
</html>
